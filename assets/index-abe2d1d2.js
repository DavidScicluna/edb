import{dH as M,a7 as S,a8 as j,cO as V,b7 as D,aL as T,dE as B,ao as c,E as e,dm as L,az as R,ai as H,dn as k,dI as z,a6 as v,dJ as A,ae as N,af as O,x,ap as Q,N as _,V as F,as as J,aC as U,ah as P,M as q}from"./useUserTheme-cad0e91d.js";import{T as G}from"./index-6fc29f67.js";import{u as K}from"./index-c3b04c28.js";import{g as w}from"./index-278c1566.js";import{d as I,e as W}from"./index-da6fdb45.js";import{E as X,a as Y}from"./index-8b729657.js";import"./index-6b3e9b0b.js";import"./dimensions-1922ff5f.js";import"./index-f91c493c.js";import"./index-5e29d59e.js";import"./index-a6d2ef26.js";import"./index-67fb8a4b.js";import"./index-566ac3e3.js";import"./index-86281d15.js";import"./index-21c2c4e5.js";import"./index-d96d68db.js";import"./formats-993363c7.js";const{convertREMToPixels:Z,convertStringToNumber:ee,getHue:oe}=N,te=M({type:"still",mode:"thumbnail"}),se=M({type:"still",mode:"full"}),ie=f=>{const r=S(),{colorMode:n}=j(),{observe:b,inView:d}=V({unobserveOnEnter:!0,rootMargin:`-${Z(ee(r.space[4],"rem"))}px 0px`}),{index:g,data:o}=f,{height:t,name:u,number:p,image:h,orientation:y}=o,{file_path:m}=h,[E,i]=D(),a=T(B()),$=T(u?["Episode",p,`"${u}"`,"photo",g+1].join(" "):`${c({type:"single",mediaType:"tv"})} Episode photo ${g+1}`);return e(L,{ref:b,colorMode:n,width:"100%",height:`${t}px`,overflow:"hidden",borderRadius:"lg",ratio:R({orientation:y}),renderIcon:l=>e(H,{...l,icon:"search",category:"outlined"}),isDisabled:E,children:e(k,{alt:$,width:"inherit",height:"inherit",borderRadius:"base",onError:()=>i.on(),onLoad:()=>i.off(),src:{boring:d?z({id:a,colors:v.omit({...r.colors},["transparent","black","white"]),hue:oe({colorMode:n,type:"color"}),size:500,variant:A({mediaType:"tv"})}):void 0,thumbnail:d?`https://image.tmdb.org/t/p/${te}${m}`:void 0,full:d?`https://image.tmdb.org/t/p/${se}${m}`:void 0}})})},ve=()=>{const{color:f,colorMode:r}=j(),{spacing:n}=O(),{episodeQuery:b,imagesQuery:d}=K(),{data:g}=b||{},{name:o,episode_number:t}=g||{},{data:u,isFetching:p,isLoading:h,isError:y,isSuccess:m,refetch:E}=d||{},{stills:i=[]}=u||{},[a,$]=x.useState([]),l=Q(a,"slow"),C=T(v.range(20).map(()=>({height:w({orientation:"portrait"}),orientation:"portrait"})));return x.useEffect(()=>{l.length===0&&i.length>0&&$(v.shuffle([...i.map(s=>({height:w({orientation:"portrait"}),image:s,orientation:"portrait"}))]))},[i]),_(F,{width:"100%",divider:e(J,{colorMode:r}),spacing:n,children:[e(U,{width:"100%",renderCaption:()=>e(G,{color:f,colorMode:r,prefix:`${o?["Episode",t,`"${o}"`].join(" "):`${c({type:"single",mediaType:"tv"})} Episode`} has a total of`,suffix:`Photo${l.length===1?"":"s"}`,total:l.length||0}),renderTitle:s=>e(P,{...s,children:"Photos"}),renderSubtitle:s=>e(P,{...s,children:`This Tab contains all the photos that were used for ${o?["Episode",t,`"${o}"`].join(" "):`the ${c({type:"single",mediaType:"tv"})} Episode`}`}),py:n*2}),e(q,{width:"100%",children:!(p||h)&&y?e(X,{label:o?["Episode",t,`"${o}"`,"Photos"].join(" "):`${c({type:"single",mediaType:"tv"})} Episode Photos`,refetch:E}):!(p||h)&&m&&a.length===0?e(Y,{label:o?["Episode",t,`"${o}"`,"Photos"].join(" "):`${c({type:"single",mediaType:"tv"})} Episode Photos`}):!(p||h)&&m&&a.length>0?e(I,{items:a.map(s=>({...s,number:t,name:o})),render:ie}):e(I,{items:C,render:W})})]})};export{ve as default};
