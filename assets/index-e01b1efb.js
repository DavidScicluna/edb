import{a6 as b,a7 as k,a8 as H,a9 as N,x as C,ap as z,ar as q,N as w,eo as U,E as e,ah as _,ao as E,bS as F,bT as L,bU as J,ai as V,bV as Q,bW as P,bX as D,bY as G,c0 as K,at as X,aQ as Y,bP as R,aL as ne,dK as Z,bI as ee,bO as se,J as te,eD as de,dV as ce,L as le,af as ie,aB as pe,V as ue}from"./useUserTheme-cad0e91d.js";import{P as he}from"./index-f93cc2e8.js";import{D as me}from"./index-da6fdb45.js";import{u as x,g as W}from"./index-c3b04c28.js";import{d as I}from"./dimensions-1922ff5f.js";import{H as oe,a as re,b as j,c as ae}from"./index-3c387dce.js";import{o as be,v as ge,p as ve,i as ye,h as fe,g as we,j as Se,k as Ee}from"./index-6b3e9b0b.js";import{V as Te}from"./index-6a4e7d59.js";import{V as xe}from"./index-b0754bf1.js";import{V as $e}from"./index-d275f317.js";import"./index-f91c493c.js";import"./index-6fc29f67.js";import"./index-86281d15.js";import"./index-5e29d59e.js";import"./index-21c2c4e5.js";import"./index-d96d68db.js";import"./formats-993363c7.js";import"./index-c20f4d73.js";import"./index-a6d2ef26.js";import"./index-67fb8a4b.js";import"./index-566ac3e3.js";import"./index-278c1566.js";import"./index-9f080699.js";const O=b.memoize(t=>{switch(t){case"cast":return we;case"guest_stars":return fe;case"crew":return ye;case"photos":return ve;case"videos":return ge;case"overview":default:return be}}),Ce=()=>{const t=k(),{color:d,colorMode:n}=H(),[c]=N(`(max-width: ${t.breakpoints.sm})`),{episodeQuery:i,creditsQuery:u,onSetActiveTab:p}=x(),{data:h,isFetching:l,isLoading:o}=i||{},{name:a,episode_number:r}=h||{},{data:T,isFetching:g,isLoading:m,isError:$,isSuccess:S}=u||{},{cast:v=[]}=T||{},[B,A]=C.useState(b.uniqBy([...v],"id").filter((s,f)=>f<20)),y=z(B,"slow");return q(()=>{A(b.uniqBy([...v],"id").filter((s,f)=>f<20))},[v]),w(U,{colorMode:n,isDisabled:y.length===0||l||o||g||m,isFullWidth:!0,spacing:2,p:2,children:[e(oe,{renderTitle:s=>e(_,{...s,children:"Cast"}),renderSubtitle:s=>e(_,{...s,children:`This list is showcasing the cast of ${a?["Episode",r,`"${a}"`].join(" "):`${E({type:"single",mediaType:"tv"})} Episode`}`}),arrowProps:{variant:"icon"},spacing:0}),e(re,{children:!(l||o||g||m)&&$?e(F,{color:d,colorMode:n,children:w(L,{children:[e(J,{renderIcon:s=>e(V,{...s,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),w(Q,{children:[e(P,{}),e(D,{children:G({type:"error",label:a?["Episode",r,`"${a}"`,"Cast"].join(" "):`${E({type:"single",mediaType:"tv"})} Episode Cast`})})]})]})}):!(l||o||g||m)&&S&&y&&y.length===0?e(F,{color:d,colorMode:n,children:e(L,{children:w(Q,{children:[e(P,{}),e(D,{children:G({type:"empty",label:a?["Episode",r,`"${a}"`,"Cast"].join(" "):`${E({type:"single",mediaType:"tv"})} Episode Cast`})})]})})}):!(l||o||g||m)&&S&&y&&y.length>0?e(j,{children:y.map(s=>e(K,{person:s,subtitle:s.character?`As ${s.character}`:void 0,sx:I},s.id))}):e(j,{children:b.range(20).map((s,f)=>e(X,{mediaType:"person",hasSubtitle:!0,sx:I},f))})}),e(ae,{children:e(Y,{color:d,colorMode:n,isDisabled:v.length===0,isFullWidth:!0,onClick:()=>p({index:O("cast")}),size:c?"xs":"sm",variant:"text",children:`View all ${R(v.length).format({average:!0})} Cast`})})]})},ze=()=>{const t=k(),{color:d,colorMode:n}=H(),[c]=N(`(max-width: ${t.breakpoints.sm})`),{episodeQuery:i,creditsQuery:u,onSetActiveTab:p}=x(),{data:h,isFetching:l,isLoading:o}=i||{},{name:a,episode_number:r}=h||{},{data:T,isFetching:g,isLoading:m,isError:$,isSuccess:S}=u||{},{guest_stars:v=[]}=T||{},[B,A]=C.useState(b.uniqBy([...v],"id").filter((s,f)=>f<20)),y=z(B,"slow");return q(()=>{A(b.uniqBy([...v],"id").filter((s,f)=>f<20))},[v]),w(U,{colorMode:n,isDisabled:y.length===0||l||o||g||m,isFullWidth:!0,spacing:2,p:2,children:[e(oe,{renderTitle:s=>e(_,{...s,children:"Guest Stars"}),renderSubtitle:s=>e(_,{...s,children:`This list is showcasing the guest stars of ${a?["Episode",r,`"${a}"`].join(" "):`${E({type:"single",mediaType:"tv"})} Episode`}`}),arrowProps:{variant:"icon"},spacing:0}),e(re,{children:!(l||o||g||m)&&$?e(F,{color:d,colorMode:n,children:w(L,{children:[e(J,{renderIcon:s=>e(V,{...s,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),w(Q,{children:[e(P,{}),e(D,{children:G({type:"error",label:a?["Episode",r,`"${a}"`,"Guest Stars"].join(" "):`${E({type:"single",mediaType:"tv"})} Episode Guest Stars`})})]})]})}):!(l||o||g||m)&&S&&y&&y.length===0?e(F,{color:d,colorMode:n,children:e(L,{children:w(Q,{children:[e(P,{}),e(D,{children:G({type:"empty",label:a?["Episode",r,`"${a}"`,"Guest Stars"].join(" "):`${E({type:"single",mediaType:"tv"})} Episode Guest Stars`})})]})})}):!(l||o||g||m)&&S&&y&&y.length>0?e(j,{children:y.map(s=>e(K,{person:s,subtitle:s.character?`As ${s.character}`:void 0,sx:I},s.id))}):e(j,{children:b.range(20).map((s,f)=>e(X,{mediaType:"person",hasSubtitle:!0,sx:I},f))})}),e(ae,{children:e(Y,{color:d,colorMode:n,isDisabled:v.length===0,isFullWidth:!0,onClick:()=>p({index:O("guest_stars")}),size:c?"xs":"sm",variant:"text",children:`View all ${R(v.length).format({average:!0})} Guest Stars`})})]})},_e=()=>{const{episodeQuery:t,imagesQuery:d,onSetActiveTab:n}=x(),{data:c}=t||{},{name:i,episode_number:u}=c||{},{data:p,isFetching:h,isLoading:l,isError:o,isSuccess:a}=d||{},{stills:r=[]}=p||{},[T,g]=C.useState([]),m=z(T,"slow"),$=ne(b.range(10).map(()=>({orientation:"portrait"})));return C.useEffect(()=>{m.length===0&&r.length>0&&g(b.shuffle([...r.filter((S,v)=>v<10).map(S=>({image:S,orientation:"portrait"}))]))},[r]),e(Te,{mediaType:"tv",photos:[...m],dummyPhotos:[...$],title:"Photos",subtitle:`This list is showcasing some of the posters & backdrops that were used for ${i?["Episode",u,`"${i}"`].join(" "):`${E({type:"single",mediaType:"tv"})} Episode`}`,emptyLabel:i?`${i} photos`:"Photos",total:r.length,isLoading:h||l,isError:o,isSuccess:a,onFooterClick:()=>n({index:O("photos")})})},Fe=()=>{const{episodeQuery:t,videosQuery:d,onSetActiveTab:n}=x(),{data:c}=t||{},{name:i,episode_number:u}=c||{},{data:p,isFetching:h,isLoading:l,isError:o,isSuccess:a}=d||{},{results:r=[]}=p||{},[T,g]=C.useState([]),m=z(T,"slow");return C.useEffect(()=>{g(b.shuffle([...r.filter(($,S)=>S<10)]))},[r]),e(xe,{mediaType:"tv",videos:[...m],title:"Videos",subtitle:`This list is showcasing some of the trailers, teasers & featurettes that were created for ${i?["Episode",u,`"${i}"`].join(" "):`${E({type:"single",mediaType:"tv"})} Episode`}`,emptyLabel:i?`${i} videos`:"Videos",total:r.length,isLoading:h||l,isError:o,isSuccess:a,onFooterClick:()=>n({index:O("videos")})})},Le=()=>{const{colorMode:t}=H(),{season:d,episode:n}=Z(),{showQuery:c}=x(),{data:i,isFetching:u,isLoading:p,isError:h}=c||{},{name:l}=i||{};return!h&&(u||p)?e(Se,{}):!h&&i?w(ee,{colorMode:t,isFullWidth:!0,p:2,children:[e(se,{renderTitle:o=>e(_,{...o,children:b.compact([`Season ${d}`,`Episode ${n}`,"of the",l?`${l}`:null,`${E({type:"single",mediaType:"tv"})}`]).join(" ")})}),e(te,{children:e(de,{show:i})})]}):null},M=({type:t,season:d,episode:n})=>{const c=k(),{colorMode:i}=H(),{id:u}=Z(),{data:p,isFetching:h,isLoading:l,isError:o}=ce({props:{id:Number(u),season:Number(d),episode:Number(n)}});return!o&&(h||l)?e(Ee,{}):!o&&p?w(ee,{colorMode:i,isFullWidth:!0,p:2,children:[e(se,{renderTitle:({color:a,...r})=>w(le,{width:"100%",alignItems:"center",justifyContent:t==="prev"?"flex-start":"flex-end",children:[t==="prev"&&e(V,{width:c.fontSizes["2xl"],height:c.fontSizes["2xl"],fontSize:c.fontSizes["2xl"],color:a,colorMode:i,icon:"arrow_back",category:"outlined"}),e(_,{...r,color:a,children:[t==="prev"?"Previous":"Next","Episode",`(S${d} • E${n})`].join(" ")}),t==="next"&&e(V,{width:c.fontSizes["2xl"],height:c.fontSizes["2xl"],fontSize:c.fontSizes["2xl"],color:a,colorMode:i,icon:"arrow_forward",category:"outlined"})]})}),e(te,{children:e($e,{episode:{...p,show_id:Number(u)},badgeLabel:b.compact([p.season_number?`S${p.season_number}`:null,p.episode_number?`E${p.episode_number}`:null]).join(" • ")})})]}):null},Ve=()=>{const t=k(),[d]=N(`(max-width: ${t.breakpoints.lg})`),{spacing:n}=ie(),{showQuery:c,episodeQuery:i}=x(),{data:u}=c||{},{seasons:p=[]}=u||{},{data:h}=i||{},l=W({direction:"prev",seasons:p,episode:h}),o=z(l),a=W({direction:"next",seasons:p,episode:h}),r=z(a);return e(pe,{width:"100%",direction:d?"column":"row",spacing:n,children:b.compact([o&&o.season&&o.episode&&e(M,{type:"prev",season:o.season,episode:o.episode}),r&&r.season&&r.episode&&e(M,{type:"next",season:r.season,episode:r.episode})])})},ss=()=>{const{spacing:t}=ie(),{episodeQuery:d}=x(),{data:n,isFetching:c,isLoading:i}=d||{},{overview:u}=n||{};return e(ue,{width:"100%",spacing:t,children:b.compact([c||i?e(me,{},"ds-edb-episode-overview-tab-dummy-paragraph"):u?e(he,{title:"Synopsis",keepFooter:!0,children:u},"ds-edb-episode-overview-tab-paragraph"):null,e(Ce,{},"ds-edb-episode-overview-tab-cast"),e(ze,{},"ds-edb-episode-overview-tab-guest-stars"),e(_e,{},"ds-edb-episode-overview-tab-photos"),e(Fe,{},"ds-edb-episode-overview-tab-videos"),e(Le,{},"ds-edb-episode-overview-tab-tv-show"),e(Ve,{},"ds-edb-episode-overview-tab-prev-next-episodes")])})};export{ss as default};
