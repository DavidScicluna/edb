import{a7 as b,a9 as D,E as t,aQ as C,cl as J,x as F,aR as K,cm as k,bN as X,a8 as Y,af as Z,c9 as ee,ap as $,cn as M,co as te,c1 as l,a6 as o,ar as ae,aq as oe,N as S,ah as j,ao as N,L as se,V as ie,as as re,cp as ne,aV as le,cq as ce}from"./useUserTheme-cad0e91d.js";import{P as de,a as pe,b as me}from"./index-f91c493c.js";import{D as he}from"./index-7571088f.js";import{d as ge}from"./formats-993363c7.js";import{m as ue}from"./index-789eed9b.js";import{S as ye,F as ve,D as fe}from"./index-2f3ca69c.js";import{T as _e}from"./index-6fc29f67.js";import"./index-8754a0a6.js";import"./index-da6fdb45.js";import"./dimensions-1922ff5f.js";import"./index-490c57f0.js";import"./index-fac269b5.js";import"./index-86281d15.js";import"./index-65752566.js";import"./index-6c03e0d3.js";import"./index-566ac3e3.js";import"./index-059dc8bd.js";import"./index-67fb8a4b.js";import"./index-278c1566.js";import"./index-5e29d59e.js";import"./tabs-1769093c.js";import"./index-c7b185ee.js";import"./index-a6d2ef26.js";import"./index-6b3e9b0b.js";import"./tabs-8cea7072.js";import"./index-f93cc2e8.js";import"./SpinnerCircularFixed-2623c82b.js";const Te=({isDisabled:i=!1,onSort:n})=>{const r=b(),[s]=D(`(max-width: ${r.breakpoints.lg})`);return t(ye,{mediaType:"tv",renderButton:c=>t(C,{...c,isFullWidth:s,isDisabled:i,variant:"outlined",children:"Sort By"}),onSort:n})},Se=({total:i,isDisabled:n=!1,onFilter:r})=>{const s=b(),[c]=D(`(max-width: ${s.breakpoints.lg})`);return t(ve,{mediaType:"tv",renderButton:d=>t(C,{...d,renderRight:i>0?({color:u,colorMode:v})=>t(_e,{color:u,colorMode:v,total:i}):void 0,isFullWidth:c,isDisabled:n,variant:"outlined",children:"Filter"}),onFilter:r})},we=({total:i,onTagDelete:n,onClear:r})=>t(J,{in:i>0,style:{width:"100%"},children:t(fe,{mediaType:"tv",onTagDelete:n,onClear:r})}),Fe=F.lazy(()=>K(()=>import("./index-099b7266.js"),["assets/index-099b7266.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-67fb8a4b.js","assets/index-566ac3e3.js"])),q=500,U={page:1},Q={sort_by:`${k.sortBy.value}.${k.direction}`},w={language:"en-US",ott_region:"US",certification_country:"US","first_air_date.lte":X(new Date).format(ge)},Xe=()=>{const i=b(),{colorMode:n}=Y(),[r]=D(`(max-width: ${i.breakpoints.lg})`),{spacing:s}=Z(),c=ee(),[d,u]=F.useState(),v=$(d,"slow"),[I,O]=F.useState(M({location,mediaType:"tv"})||0),f=$(I),B=te({props:{mediaType:"tv"},config:{params:{...l.parse(location.search)}},options:{enabled:!1,onSuccess:e=>{let a=[];e.pages.forEach(p=>{a=[...a,...p.results||[]]}),u({page:e.pages[e.pages.length-1].page,results:o.uniqBy([...a],"id"),total_pages:e.pages[e.pages.length-1].total_pages,total_results:e.pages[e.pages.length-1].total_results})}}}),{isFetchingNextPage:x,isFetching:P,isLoading:V,isError:E,refetch:R,fetchNextPage:A}=B,_=e=>{u(void 0),c({pathname:".",search:l.stringify({...e})}),setTimeout(R,q)},H=()=>{const e=o.omit({...l.parse(location.search)},"page"),a=o.merge({...e,page:((d==null?void 0:d.page)||1)+1});c({pathname:".",search:l.stringify({...a})}),setTimeout(()=>A(),q)},W=({sortBy:e,direction:a})=>{const p=o.omit({...l.parse(location.search)},"sort_by"),y={sort_by:`${e.value}.${a}`};_(o.merge({...p,...y}))},T=e=>{const{certifications:a,dates:p,genres:y,keywords:L,rating:m,count:h,runtime:g}=e,z=o.pick({...l.parse(location.search)},"sort_by"),G=o.omitBy(o.merge({...w,certification:a.length>0?a.join("|"):void 0,"first_air_date.gte":p.gte||void 0,"first_air_date.lte":p.lte||void 0,without_genres:y.length>0?ce({mediaType:"tv",genres:y}).join(","):void 0,with_keywords:L.length>0?L.join(","):void 0,"vote_average.gte":m.length>0&&m[0]?m[0]:void 0,"vote_average.lte":m.length>0&&m[1]?m[1]:void 0,"vote_count.gte":h.length>0&&h[0]?h[0]:void 0,"vote_count.lte":h.length>0&&h[1]?h[1]:void 0,"with_runtime.gte":g.length>0&&g[0]?g[0]:void 0,"with_runtime.lte":g.length>0&&g[1]?g[1]:void 0}),o.isNil||o.isEmpty);_(o.merge({...z,...G}))};return ae(()=>O(M({location,mediaType:"tv"})||0),[location.search]),oe(()=>{const e=l.parse(location.search),a=location.search.length>0?{...U,...Q,...w,...e}:{...U,...Q,...w};_(o.merge({...a}))}),S(de,{children:[t(pe,{renderTitle:e=>t(j,{...e,children:N({type:"multiple",mediaType:"tv"})}),renderSubtitle:e=>t(j,{...e,children:`A list containing all the ${N({type:"multiple",mediaType:"tv"})} that have been released or will be in the coming months.`}),actions:S(se,{width:r?"100%":"auto",spacing:2,children:[t(Te,{isDisabled:x||P||V||E,onSort:W}),t(Se,{total:f,isDisabled:x||P||V||E,onFilter:T}),t(he,{})]}),direction:r?"column":"row",spacing:s,px:s,py:s*2}),t(me,{p:s,children:S(ie,{width:"100%",divider:f>0?t(re,{colorMode:n}):void 0,spacing:s,children:[t(we,{total:f,onTagDelete:({filter:e,form:a})=>T({...a,[e]:ne[e]}),onClear:e=>T({...e})}),t(le,{fallback:t(ue,{}),children:t(Fe,{query:B,shows:v,onLoadMore:H})})]})})]})};export{Xe as default};
