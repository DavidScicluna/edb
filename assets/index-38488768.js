import{a7 as T,dR as w,c8 as ge,cW as Y,cX as fe,b7 as X,aL as be,a6 as U,N as d,aO as Ce,E as e,cY as Me,bI as J,V as k,as as Se,J as K,cB as N,aj as oe,ai as V,L as we,d_ as xe,d$ as ye,aP as Z,c1 as ve,aQ as I,bz as ee,ca as Ie,c6 as ke,al as Fe,cb as Te,cc as We,cd as ze,ce as De,cf as $e,cg as Ue,H as j,I as x,x as Q,ar as ce,M as de,ah as F,ae as E,d6 as Ae,d7 as te,a9 as he,dm as He,az as Pe,e0 as Oe,b6 as ue,e1 as Re,e2 as Be,e3 as Ve,bB as je,aA as Ee,cx as me,a8 as Le,af as Ge,c9 as qe,U as _e,c7 as Ne,cV as Ye,dS as Xe,dT as se,db as Qe,ba as H,bd as P,dI as Je,bc as re,b9 as ae,ch as ie,ci as ne,bN as Ke,e4 as Ze}from"./useUserTheme-cad0e91d.js";import{u as eo,P as oo,s as to}from"./index-5536e45c.js";import{I as so}from"./index-7c3284f8.js";import{s as ro}from"./index-789eed9b.js";import"./index-f91c493c.js";import"./index-8754a0a6.js";import"./index-da6fdb45.js";import"./dimensions-1922ff5f.js";import"./index-490c57f0.js";import"./index-fac269b5.js";import"./index-86281d15.js";import"./index-65752566.js";import"./index-6c03e0d3.js";import"./index-566ac3e3.js";import"./index-059dc8bd.js";import"./index-67fb8a4b.js";import"./index-278c1566.js";import"./index-5e29d59e.js";import"./tabs-1769093c.js";import"./index-c7b185ee.js";import"./index-a6d2ef26.js";import"./index-6b3e9b0b.js";import"./tabs-8cea7072.js";const v=2,ao=o=>{const a=T(),{color:s=j,colorMode:i=x}=w(),{isOpen:C,onOpen:u,onClose:r}=ge(),{form:S,onSubmitAsGuest:m,onSubmit:f}=o,{control:l,setValue:y,handleSubmit:W}=S,z=Y({control:l,name:"username"}),{isDirty:A}=fe({control:l}),[M,L]=X(),[D,$]=X(),G=be(U.sample(eo)||"johnsmith"),q=()=>{r(),m()};return d(Ce,{children:[e(Me,{width:"100%",onSubmit:W(f),children:e(J,{colorMode:i,isFullWidth:!0,p:v,children:d(k,{width:"100%",divider:e(Se,{colorMode:i}),spacing:v,children:[e(K,{children:d(k,{width:"100%",spacing:v,children:[e(N,{control:l,name:"username",render:({field:{onChange:n,onBlur:b,value:t,name:c},fieldState:{error:h}})=>e(oe,{color:s,colorMode:i,autoComplete:"off",label:"Username",id:c,name:c,helper:h?h.message:void 0,placeholder:G,onBlur:b,onChange:n,isError:!!h,isFullWidth:!0,isRequired:!0,renderLeftPanel:({color:g,...p})=>e(V,{...p,icon:"alternate_email",category:"outlined",skeletonColor:g}),value:t})}),e(N,{control:l,name:"password",render:({field:{onChange:n,onBlur:b,value:t,name:c},fieldState:{error:h}})=>e(oe,{color:s,colorMode:i,autoComplete:"off",label:"Password",name:c,helper:h?h.message:void 0,placeholder:M?"password":"••••••••",onBlur:b,onChange:n,isError:!!h,isFullWidth:!0,isRequired:!0,renderRightPanel:({color:g,...p})=>e(oo,{...p,label:"Password",isVisible:M,isHovering:D,setIsVisible:L,setIsHovering:$,iconProps:{...p,skeletonColor:g}}),type:M?"text":"password",value:t})}),d(we,{width:"100%",justifyContent:"space-between",spacing:0,children:[e(N,{control:l,name:"rememberMe",render:({field:{onBlur:n,value:b,name:t}})=>e(xe,{"aria-label":"Remember Me",color:s,colorMode:i,id:t,name:t,isChecked:b,onBlur:n,onChange:({isChecked:c})=>y(t,c,{shouldDirty:!1}),renderRightPanel:c=>e(ye,{...U.omit(c,["width","height","color"]),fontSize:"xs",fontWeight:"semibold",textTransform:"uppercase",letterSpacing:".6px",children:"Remember Me"}),size:"xs",variant:"transparent"})}),e(Z,{to:{pathname:"/authentication/reset-password",search:z?ve.stringify({username:z}):""},children:e(I,{color:s,colorMode:i,size:"xs",variant:"text",children:"Reset password?"})})]})]})}),e(ee,{children:d(k,{width:"100%",spacing:v,children:[e(I,{color:s,colorMode:i,isDisabled:!A,isFullWidth:!0,type:"submit",children:"Sign In"}),e(I,{colorMode:i,isFullWidth:!0,onClick:()=>u(),size:"xs",variant:"text",children:"Or continue as a guest"})]})})]})})}),e(Ie,{colorMode:i,isOpen:C,onClose:r,renderCancel:({icon:n,category:b,...t})=>e(ke,{...t,children:e(Fe,{icon:n,category:b})}),children:d(Te,{spacing:v,p:v,children:[e(We,{renderIcon:n=>e(V,{...n,width:a.fontSizes["6xl"],height:a.fontSizes["6xl"],fontSize:a.fontSizes["6xl"],icon:"login"}),color:s,p:2}),d(ze,{children:[e(De,{children:"Sign in as a Guest?"}),e($e,{children:"Are you sure you want to sign in as a guest? You will not be able to like, create and add to lists!"})]}),e(Ue,{renderCancel:n=>e(I,{...n,children:"Cancel"}),renderAction:n=>e(I,{...n,color:s,onClick:()=>q(),children:"Sign in"})})]})})]})},{getColor:O}=E,io=()=>{const o=T(),{colorMode:a=x}=w(),[s,i]=Q.useState(O({theme:o,colorMode:a,type:"text.primary"}));return ce(()=>i(O({theme:o,colorMode:a,type:"text.primary"})),[a]),d(k,{width:"100%",spacing:2,children:[e(de,{width:[o.space[10],o.space[12],o.space[14],o.space[16]],height:[o.space[10],o.space[12],o.space[14],o.space[16]],fontSize:["200%","250%","250%","300%"],borderWidth:["2px","2px","4px","4px"],sx:{cursor:"default",pointerEvents:"none",minWidth:"auto",minHeight:"auto",maxWidth:"none",maxHeight:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none",borderStyle:"solid",borderColor:s,borderRadius:o.radii.full,background:o.colors.transparent,backgroundColor:o.colors.transparent,color:s,fontFamily:'"Pacifico", cursive',fontWeight:o.fontWeights.normal,textTransform:"lowercase",whiteSpace:"nowrap",lineHeight:o.lineHeights.base,letterSpacing:".6px",p:o.space[2]},children:"edb"}),d(k,{width:"100%",spacing:0,children:[e(F,{align:"center",color:O({theme:o,colorMode:a,type:"text.primary"}),fontSize:["4xl","4xl","6xl","6xl"],lineHeight:"base",whiteSpace:"nowrap",children:"Hello there!"}),e(F,{align:"center",color:O({theme:o,colorMode:a,type:"text.secondary"}),fontSize:["xs","xs","sm","sm"],children:"Welcome to The Entertainment Database application or EDB for short. The one-stop app for all things Movies, TV Shows, and the people that make it happen!"})]})]})},no=Ae().shape({username:te().required().label("Username"),password:te().required().label("Password")}),lo=()=>{const o=T(),[a]=he(`(max-width: ${o.breakpoints.sm})`),{color:s=j,colorMode:i=x}=w();return e(Z,{to:"/authentication/register",isFullWidth:!0,children:e(I,{color:s,colorMode:i,isFullWidth:!0,size:"xs",variant:"text",children:U.compact([a?null:"Don't have an account yet?","Create New Account!"]).join(" ")})})},{getColor:co}=E,ho=o=>{const a=T(),{color:s=j,colorMode:i=x}=w(),{user:C,isSelected:u=!1,onClick:r}=o,{name:S,avatar_path:m}=C.data.info;return d(J,{color:u?s:"gray",colorMode:i,isLight:!u,isDivisible:!1,isClickable:!0,isFullWidth:!1,onClick:()=>r(),p:2,sx:{height:"100%"},children:[e(K,{children:e(He,{colorMode:i,width:a.space[8],height:a.space[8],borderRadius:"base",ratio:Pe({orientation:"square"}),renderIcon:f=>e(V,{...f,icon:"check",category:"outlined"}),isActive:u,children:e(Oe,{alt:S,borderRadius:"base",src:{full:m},size:a.space[8]})})}),e(ee,{children:e(F,{align:"center",color:co({theme:a,colorMode:i,type:"text.primary"}),fontSize:"sm",fontWeight:"semibold",noOfLines:1,children:S})})]})},{getColor:le}=E,uo=()=>{const o=T(),{color:a=j,colorMode:s=x}=w();return e(Z,{to:"/authentication/register",isFullWidth:!0,sx:{height:"100%"},children:d(J,{colorMode:s,isLight:!0,isDivisible:!1,isClickable:!0,isFullWidth:!1,p:2,sx:{height:"100%"},children:[e(K,{children:e(de,{children:e(V,{color:le({theme:o,colorMode:s,color:a,type:"color"}),colorMode:s,width:o.space[8],height:o.space[8],fontSize:o.space[8],icon:"add_circle_outline",skeletonColor:a})})}),e(ee,{children:e(F,{align:"center",color:le({theme:o,colorMode:s,type:"text.primary"}),fontSize:"sm",fontWeight:"semibold",noOfLines:1,children:"Create New Account"})})]})})},mo=({selectedUserID:o,onUserClick:a})=>{const{colorMode:s=x}=w(),i=ue(r=>r.users.data.users||[]),[C,u]=X();return e(Re,{header:e(Be,{renderTitle:r=>e(F,{...r,fontSize:"md",fontWeight:"semibold",children:"Recent Sign ins"}),renderSubtitle:r=>e(F,{...r,children:"Click your picture or create a new account."})}),body:e(Ve,{children:e(je,{colorMode:s,renderDivider:({padding:r})=>e(Ee,{padding:r}),children:[...me([...i]).desc(r=>r.data.signedInAt).map(r=>e(ho,{user:{...r},isSelected:o===r.data.id,onClick:()=>a(o!==r.data.id?{...r}:void 0)},r.data.id)),e(uo,{},"ds-edb-signin-create-user")].map(r=>r)})}),colorMode:s,isOpen:C,isFullWidth:!0,onOpen:()=>u.toggle(),p:2})},{getHue:po,getColorMode:go}=E,R="ds-edb-authentication-sign-in-success-toast",B="ds-edb-authentication-sign-in-error-toast",fo={username:"",password:"",rememberMe:!1},Vo=()=>{const o=T(),[a]=he(`(min-width: ${o.breakpoints.lg})`),s=Le(),{spacing:i}=Ge(),C=qe(),{colorMode:u=x,setColor:r,setColorMode:S}=w(),m=_e(),f=ue(t=>t.users.data.users),l=Ne(),[y,W]=Q.useState(),z=Ye({defaultValues:fo,resolver:Qe(no)}),{control:A,setValue:M,reset:L}=z,D=Y({control:A,name:"username"}),$=Y({control:A,name:"password"}),G=t=>{if(t){const{color:c,colorMode:h}=t.ui.theme;W(t.data.id),r(c),S(h==="system"?go():h),M("username",t.data.credentials.username,{shouldDirty:!0}),M("rememberMe",t.data.credentials.rememberMe,{shouldDirty:!0})}else W(void 0),M("username","",{shouldDirty:!0}),M("rememberMe",!1,{shouldDirty:!0})},q=Q.useCallback(U.debounce(()=>{const t=f.find(c=>c.data.id===y);t&&t.data.credentials.username!==D&&t.data.credentials.password!==$&&(W(""),r(s.color),S(s.colorMode))},500),[f,y,D,$,s]),n=()=>{m(H(!0));const t={...P,data:{...P.data,info:{...P.data.info,avatar_path:Je({id:P.data.id,colors:U.omit({...o.colors},["transparent","black","white"]),hue:po({colorMode:u,type:"color"}),size:500,variant:"beam"})}}};m(re({...t})),ae({color:t.ui.theme.color,colorMode:u}),setTimeout(()=>C("/"),500),setTimeout(()=>m(H(!1)),2500)},b=t=>{const{password:c,rememberMe:h}=t,g=f.find(p=>p.data.id===y);if(g&&to(c).toString()===g.data.credentials.password){m(H(!0)),l.isActive(R)||(l.close(B),l({id:R,duration:ie({duration:15}),position:"bottom-left",render:()=>e(ne,{duration:15,description:`Successfully signed in as ${g.data.info.name}!`,status:"success",onClose:()=>l.close(R)})}));const p={...g,data:{...g.data,credentials:{...g.data.credentials,rememberMe:h},signedInAt:Ke().toISOString()}},pe=me([...f.filter(_=>_.data.id!==p.data.id),p]).desc(_=>_.data.signedInAt);m(re({...p})),m(Ze([...pe])),ae({color:p.ui.theme.color,colorMode:u}),L({...t}),setTimeout(()=>C("/"),500),setTimeout(()=>m(H(!1)),2500)}else l.isActive(B)||(l.close(R),l({id:B,duration:ie({duration:15}),position:"bottom-left",render:()=>e(ne,{duration:15,description:"Incorrect username or password! Please try again.",status:"error",onClose:()=>l.close(B)})}))};return ce(()=>q(),[D,$]),d(Xe,{width:"100%",height:"100vh",templateRows:"repeat(1, 1fr)",templateColumns:`repeat(${a?2:1}, 1fr)`,overflowX:"hidden",overflowY:"hidden",gap:0,children:[a&&e(se,{overflowX:"hidden",overflowY:"hidden",children:e(so,{width:"100%",height:"100vh",illustration:ro})}),e(se,{overflowX:"hidden",overflowY:"auto",children:d(k,{width:"100%",minHeight:"100vh",alignItems:"stretch",justifyContent:"space-between",spacing:i,p:i,children:[e(io,{}),f.length>0&&e(mo,{selectedUserID:y,onUserClick:G}),e(ao,{form:z,onSubmitAsGuest:n,onSubmit:b}),e(lo,{})]})})]})};export{Vo as default,fo as defaultValues};
