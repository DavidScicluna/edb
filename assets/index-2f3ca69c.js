import{a8 as v,N as p,cr as J,E as e,cs as X,ct as ee,bN as _,a6 as $,b6 as le,cu as xt,a7 as W,a9 as ne,b7 as it,c5 as st,c6 as ue,cp as w,al as Ce,aa as xe,ax as lt,x as z,ap as ct,aB as De,as as at,M as re,bB as Dt,ae as Me,cv as we,af as $e,c8 as Fe,aO as ke,aZ as ze,a_ as Ae,cw as _e,ah as B,ai as E,a$ as Be,V as ce,cx as Re,cy as Te,aQ as b,an as dt,L as oe,cz as Se,cA as ht,Z as ut,cB as V,bI as O,bO as ie,J as I,bS as L,bT as j,bU as me,bV as H,bW as Q,bX as K,bY as N,aD as pe,aE as ge,bZ as q,aJ as U,aK as Y,cC as be,bp as Ee,cD as Qe,bq as We,cE as Ge,cF as Ve,cG as Ke,cH as mt,_ as pt,aL as Mt,cI as Ne,aj as $t,cJ as Ft,cK as kt,cL as zt,aA as At,ag as _t,cM as Bt,cN as Rt,cO as Tt,cP as Pe,cQ as qe,aY as Et,cR as Wt,cS as Ue,cT as ye,cU as Ye,cV as gt,cW as Gt,cX as yt,cY as Vt,ao as fe,cZ as Ot,c_ as Oe,cm as he,c$ as Ze,d0 as Je,d1 as Xe}from"./useUserTheme-cad0e91d.js";import{v as Z,d as se}from"./formats-993363c7.js";import{P as It}from"./index-f93cc2e8.js";import{S as Lt}from"./SpinnerCircularFixed-2623c82b.js";const jt=({certifications:l,onClick:t,onDelete:r})=>{const{color:n,colorMode:i}=v();return p(J,{color:n,colorMode:i,isClickable:!!t,onClick:t?()=>t():void 0,variant:"outlined",children:[e(X,{children:`Certification${l.length===1?"":"s"}: ${l.join(", ")}`}),!!r&&e(ee,{onDelete:()=>r()})]})},Ht=({counts:l,onClick:t,onDelete:r})=>{const{color:n,colorMode:i}=v();return p(J,{color:n,colorMode:i,isClickable:!!t,onClick:t?()=>t():void 0,variant:"outlined",children:[e(X,{children:`Count${l.length===1?"":"s"}: ${l.map(h=>`${h} ratings`).join(" -> ")}`}),!!r&&e(ee,{onDelete:()=>r()})]})},Qt=({dates:l,mediaType:t,onClick:r,onDelete:n})=>{const{color:i,colorMode:h}=v();return p(J,{color:i,colorMode:h,isClickable:!!r,onClick:r?()=>r():void 0,variant:"outlined",children:[e(X,{children:[t==="movie"?"Release Date":"First Air Date",_(l.gte).isSame(_(l.lte),"date")?_(l.gte).format(Z):$.compact([l.gte?`From: ${_(l.gte).format(Z)}`:null,l.lte?`To: ${_(l.lte).format(Z)}`:null]).join(" -> ")].join(": ")}),!!n&&e(ee,{onDelete:()=>n()})]})},Kt=({mediaType:l,genres:t,onClick:r,onDelete:n})=>{const{color:i,colorMode:h}=v(),d=le(g=>g.options.data.genres[l]||[]);return p(J,{color:i,colorMode:h,isClickable:!!r,onClick:r?()=>r():void 0,variant:"outlined",children:[e(X,{children:`Genre${t.length===1?"":"s"}: ${d.filter(({id:g})=>t.some(o=>o===g)).map(({name:g})=>g).join(", ")}`}),!!n&&e(ee,{onDelete:()=>n()})]})},Nt=({keywords:l,onClick:t,onDelete:r})=>{const{color:n,colorMode:i}=v(),h=xt({props:{keywords:l}});return p(J,{color:n,colorMode:i,isClickable:!!t,onClick:t?()=>t():void 0,variant:"outlined",children:[e(X,{children:`Keyword${l.length===1?"":"s"}: ${$.compact(h.map(({data:d})=>d)).map(({name:d})=>d).join(", ")}`}),!!r&&e(ee,{onDelete:()=>r()})]})},Pt=({ratings:l,onClick:t,onDelete:r})=>{const{color:n,colorMode:i}=v();return p(J,{color:n,colorMode:i,isClickable:!!t,onClick:t?()=>t():void 0,variant:"outlined",children:[e(X,{children:`Rating${l.length===1?"":"s"}: ${l.join(" -> ")}`}),!!r&&e(ee,{onDelete:()=>r()})]})},qt=({runtimes:l,onClick:t,onDelete:r})=>{const{color:n,colorMode:i}=v();return p(J,{color:n,colorMode:i,isClickable:!!t,onClick:t?()=>t():void 0,variant:"outlined",children:[e(X,{children:`Runtime${l.length===1?"":"s"}: ${l.map(h=>`${h} minutes`).join(" -> ")}`}),!!r&&e(ee,{onDelete:()=>r()})]})},Ut=({onClear:l})=>{const t=W(),{colorMode:r}=v(),[n]=ne(`(max-width: ${t.breakpoints.sm})`),[i,h]=it();return e(st,{colorMode:r,"aria-label":"Clear Filters (tooltip)",label:"Clear Filters",placement:"top-end",isOpen:i,children:e(ue,{colorMode:r,isFullWidth:n,onClick:()=>l({...w}),onMouseEnter:()=>h.on(),onMouseLeave:()=>h.off(),variant:"outlined",children:e(Ce,{icon:"clear"})})})},{convertREMToPixels:Yt,convertStringToNumber:Zt}=Me,ve=2,vr=({mediaType:l,onTagClick:t,onTagDelete:r,onClear:n})=>{const i=W(),{colorMode:h}=v(),[d]=ne(`(max-width: ${i.breakpoints.sm})`),g=xe(),[o,{width:u}]=lt(),[s,m]=z.useState(w),a=ct(s,"slow"),f=()=>{g.search&&g.search.length>0&&m(we({location:g,mediaType:l}))},R=z.useCallback(()=>{const M=Yt(Zt(i.space[ve],"rem"))*2;return`calc(100% - ${u+2+M}px)`},[i,ve,u]);return z.useEffect(()=>f(),[g.search]),p(De,{width:"100%",direction:d?"column":"row",alignItems:"stretch",justifyContent:"stretch",divider:d?void 0:e(at,{colorMode:h,orientation:"vertical"}),spacing:ve,children:[e(re,{width:R(),children:e(Dt,{colorMode:h,renderDivider:({padding:D})=>e(re,{p:D}),children:$.compact([a.dates.gte!==w.dates.gte||a.dates.lte!==w.dates.lte?e(Qt,{dates:a.dates,mediaType:l,onClick:t?()=>t({filter:"genres",form:a}):void 0,onDelete:r?()=>r({filter:"genres",form:a}):void 0}):null,a.genres!==w.genres?e(Kt,{genres:a.genres,mediaType:l,onClick:t?()=>t({filter:"genres",form:a}):void 0,onDelete:r?()=>r({filter:"genres",form:a}):void 0}):null,a.certifications!==w.certifications?e(jt,{certifications:a.certifications,onClick:t?()=>t({filter:"certifications",form:a}):void 0,onDelete:r?()=>r({filter:"certifications",form:a}):void 0}):null,a.rating!==w.rating?e(Pt,{ratings:a.rating,onClick:t?()=>t({filter:"rating",form:a}):void 0,onDelete:r?()=>r({filter:"rating",form:a}):void 0}):null,a.count!==w.count?e(Ht,{counts:a.count,onClick:t?()=>t({filter:"count",form:a}):void 0,onDelete:r?()=>r({filter:"count",form:a}):void 0}):null,a.runtime!==w.runtime?e(qt,{runtimes:a.runtime,onClick:t?()=>t({filter:"runtime",form:a}):void 0,onDelete:r?()=>r({filter:"runtime",form:a}):void 0}):null,a.keywords!==w.keywords?e(Nt,{keywords:a.keywords,onClick:t?()=>t({filter:"keywords",form:a}):void 0,onDelete:r?()=>r({filter:"keywords",form:a}):void 0}):null])})}),e(re,{ref:o,children:e(Ut,{onClear:n})})]})},ft=({mediaType:l})=>{const{color:t,colorMode:r}=v(),{spacing:n}=$e(),{isOpen:i,onOpen:h,onClose:d}=Fe(),g=le(s=>{var m,a;return((a=(m=s.options.data.certifications[l])==null?void 0:m.certifications)==null?void 0:a.US)||[]}),[o,u]=it();return p(ke,{children:[e(st,{"aria-label":"Open Certifications Help Modal (tooltip)",colorMode:r,isOpen:o,placement:"top",label:"Open Certifications Help Modal",children:e(ue,{"aria-label":"Open Certifications Help Modal",color:i?t:"gray",colorMode:r,isActive:i,onMouseEnter:()=>u.on(),onMouseLeave:()=>u.off(),onClick:h,size:"xs",variant:"icon",children:e(Ce,{icon:i?"help":"help_outline",category:"outlined"})})}),e(ze,{colorMode:r,isOpen:i,onClose:d,size:"xl",children:p(Ae,{children:[e(_e,{renderTitle:s=>e(B,{...s,children:"Certifications Meaning"}),renderCancel:({icon:s,category:m,...a})=>e(ue,{...a,children:e(E,{icon:s,category:m})})}),e(Be,{children:e(ce,{width:"100%",spacing:n,children:Re(g).desc(({order:s})=>s).map(({certification:s,meaning:m=""})=>e(It,{title:$.upperCase(s),children:m},s))})}),e(Te,{renderAction:s=>e(b,{...s,color:"gray",isFullWidth:!0,onClick:d,variant:"outlined",children:"Cancel"})})]})})]})},Ie=()=>{const{colorMode:l}=v();return e(dt,{color:"gray",colorMode:l,variant:"outlined",children:"Certification Name"})},Ct=l=>{const{color:t,colorMode:r}=v(),{certification:n,isActive:i=!1,onClick:h}=l;return n?e(b,{color:i?t:"gray",colorMode:r,renderRight:i?({colorMode:d,height:g})=>e(E,{colorMode:d,width:`${g}px`,height:`${g}px`,fontSize:`${g}px`,icon:"check",category:"outlined"}):void 0,onClick:()=>h(),variant:"outlined",children:n}):e(Ie,{})},St=l=>{const{color:t,colorMode:r}=v(),{allCertifications:n=0,certifications:i=0,onClear:h,onToggle:d}=l;return p(oe,{spacing:1,children:[e(b,{color:t,colorMode:r,isDisabled:n===0||i===0||i===n,onClick:()=>h(),size:"xs",variant:"text",children:"Clear"}),e(b,{color:t,colorMode:r,isDisabled:n===0,onClick:()=>d(),size:"xs",variant:"text",children:`${i===n?"Remove":"Select"} All`})]})},Jt=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),{control:i,setValue:h}=l,d=Se(ht({mediaType:"movie"})),g=le(C=>{var y,x;return((x=(y=C.options.data.certifications.movie)==null?void 0:y.certifications)==null?void 0:x.US)||[]}),[o,u]=z.useState([...g]),[s,m]=z.useState(),{isFetching:a,isLoading:f,isError:R,isSuccess:D,refetch:M}=ut({props:{mediaType:"movie"},options:{enabled:!d&&o.length===0,onSuccess:({certifications:C})=>u([...(C==null?void 0:C.US)||[]]),onError:C=>{var y;return m((y=C.response)==null?void 0:y.data)}}});return e(V,{control:i,name:"certifications",render:({field:{onBlur:C,value:y=[],name:x}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:C,p:2,children:[e(ie,{renderTitle:c=>p(oe,{spacing:.5,children:[e(B,{...c,children:"Certifications"}),o.length>0&&e(ft,{mediaType:"movie"})]}),actions:e(St,{allCertifications:o.length,certifications:y.length,onClear:()=>h(x,w.certifications,{shouldDirty:!0}),onToggle:()=>h(x,y.length===o.length?[]:[...o].map(({certification:c})=>c),{shouldDirty:!0})})}),e(I,{children:!(a||f)&&R?e(L,{color:r,colorMode:n,children:p(j,{children:[e(me,{renderIcon:c=>e(E,{...c,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),p(H,{children:[e(Q,{}),e(K,{children:N({type:"error",label:"Certifications"})})]}),s&&s.status_code&&s.status_message&&e(pe,{color:r,colorMode:n,children:e(ge,{children:`(${s.status_code}) ${s.status_message}`})}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length===0?e(L,{color:r,colorMode:n,children:p(j,{children:[p(H,{children:[e(Q,{}),e(K,{children:N({type:"empty",label:"Certifications"})})]}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length>0?e(U,{width:"100%",spacing:1.5,children:Re(o).desc(({order:c})=>c).map(({certification:c,meaning:F,...S})=>e(Y,{children:e(Ct,{...S,certification:c,meaning:F,isActive:y.some(A=>A===c),onClick:()=>h(x,y.some(A=>A===c)?y.filter(A=>A!==c):[...y,c],{shouldDirty:!0})})},c))}):e(U,{width:"100%",spacing:1.5,children:$.range(15).map((c,F)=>e(Y,{children:e(Ie,{})},F))})})]})})},Xt=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),{control:i,setValue:h}=l,d=Se(ht({mediaType:"tv"})),g=le(C=>{var y,x;return((x=(y=C.options.data.certifications.tv)==null?void 0:y.certifications)==null?void 0:x.US)||[]}),[o,u]=z.useState([...g]),[s,m]=z.useState(),{isFetching:a,isLoading:f,isError:R,isSuccess:D,refetch:M}=ut({props:{mediaType:"tv"},options:{enabled:!d&&o.length===0,onSuccess:({certifications:C})=>u([...(C==null?void 0:C.US)||[]]),onError:C=>{var y;return m((y=C.response)==null?void 0:y.data)}}});return e(V,{control:i,name:"certifications",render:({field:{onBlur:C,value:y=[],name:x}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:C,p:2,children:[e(ie,{renderTitle:c=>p(oe,{spacing:.5,children:[e(B,{...c,children:"Certifications"}),o.length>0&&e(ft,{mediaType:"tv"})]}),actions:e(St,{allCertifications:o.length,certifications:y.length,onClear:()=>h(x,w.certifications,{shouldDirty:!0}),onToggle:()=>h(x,y.length===o.length?[]:[...o].map(({certification:c})=>c),{shouldDirty:!0})})}),e(I,{children:!(a||f)&&R?e(L,{color:r,colorMode:n,children:p(j,{children:[e(me,{renderIcon:c=>e(E,{...c,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),p(H,{children:[e(Q,{}),e(K,{children:N({type:"error",label:"Certifications"})})]}),s&&s.status_code&&s.status_message&&e(pe,{color:r,colorMode:n,children:e(ge,{children:`(${s.status_code}) ${s.status_message}`})}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length===0?e(L,{color:r,colorMode:n,children:p(j,{children:[p(H,{children:[e(Q,{}),e(K,{children:N({type:"empty",label:"Certifications"})})]}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length>0?e(U,{width:"100%",spacing:1.5,children:Re(o).desc(({order:c})=>c).map(({certification:c,meaning:F,...S})=>e(Y,{children:e(Ct,{...S,certification:c,meaning:F,isActive:y.some(A=>A===c),onClick:()=>h(x,y.some(A=>A===c)?y.filter(A=>A!==c):[...y,c],{shouldDirty:!0})})},c))}):e(U,{width:"100%",spacing:1.5,children:$.range(15).map((c,F)=>e(Y,{children:e(Ie,{})},F))})})]})})},er=({form:l,mediaType:t})=>{switch(t){case"movie":return e(Jt,{form:l});case"tv":return e(Xt,{form:l})}},tr=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),[i]=ne(`(min-width: ${t.breakpoints.md})`),{control:h,setValue:d}=l;return e(V,{control:h,name:"count",render:({field:{onBlur:g,value:o,name:u}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:g,p:2,children:[e(be,{title:"Number of Ratings Range",subtitle:"",renderMessage:s=>e(B,{...s,children:o.map(m=>`${m} ratings`).join(" -> ")}),renderButton:s=>e(b,{...s,isDisabled:o.length===0,onClick:()=>d("count",w.count,{shouldDirty:!0}),children:"Clear"}),isMessageVisible:o.length>0}),e(I,{children:e(Ee,{sx:{width:"100%",flexWrap:i?"wrap":"nowrap"},children:Qe.map((s,m)=>e(We,{index:m,total:Qe.length-1,sx:{flex:i?1:void 0,width:i?`${100/6}%`:"auto"},children:e(b,{color:Ge({list:$.compact(o),number:s})?r:"gray",colorMode:n,isFullWidth:!0,onClick:()=>d(u,Ve({list:$.compact(o),number:s}),{shouldDirty:!0}),variant:o.some(a=>a===s)?"contained":"outlined",children:$.toString(s)})},s))})})]})})},et=new Date(1900,1),tt=new Date(2100,1),rr=({form:l,mediaType:t})=>{const r=W(),{color:n,colorMode:i}=v(),[h]=ne(`(max-width: ${r.breakpoints.sm})`),{control:d,setValue:g}=l;return e(V,{control:d,name:"dates",render:({field:{onBlur:o,value:u,name:s}})=>p(O,{colorMode:i,isFullWidth:!0,onBlur:o,p:2,children:[e(be,{title:t==="movie"?"Release Date":"First Air Date",subtitle:"",renderMessage:m=>e(B,{...m,children:_(u.gte).isSame(_(u.lte),"date")?_(u.gte).format(Z):$.compact([u.gte?`From: ${_(u.gte).format(Z)}`:null,u.lte?`To: ${_(u.lte).format(Z)}`:null]).join(" -> ")}),renderButton:m=>e(b,{...m,isDisabled:!u.gte&&!u.lte,onClick:()=>g(s,w.dates,{shouldDirty:!0}),children:"Clear"}),isMessageVisible:!!u.gte||!!u.lte}),e(I,{children:p(De,{width:"100%",direction:h?"column":"row",alignItems:"center",justifyContent:"center",spacing:2,children:[e(V,{control:d,name:"dates.gte",render:({field:{value:m,name:a}})=>e(Ke,{color:n,colorMode:i,renderButton:f=>e(b,{...f,isFullWidth:!0,variant:"outlined",children:m?_(m).format(Z):"Select From Date"}),minDate:et,maxDate:tt,monthsToDisplay:1,firstDayOfWeek:1,onSetDate:f=>g(a,_(f).format(se),{shouldDirty:!0}),value:m?_(m,se).toDate():void 0})}),e(V,{control:d,name:"dates.lte",render:({field:{value:m,name:a}})=>e(Ke,{color:n,colorMode:i,renderButton:f=>e(b,{...f,isFullWidth:!0,variant:"outlined",children:m?_(m).format(Z):"Select To Date"}),minDate:u.gte?_(u.gte,se).toDate():et,maxDate:tt,monthsToDisplay:1,firstDayOfWeek:1,onSetDate:f=>{g(a,_(f).format(se),{shouldDirty:!0}),u.gte||g("dates.gte",_(_(f).subtract(1,"days").toDate()).format(se),{shouldDirty:!0})},value:m?_(m,se).toDate():void 0})})]})})]})})},Le=()=>{const{colorMode:l}=v();return e(dt,{color:"gray",colorMode:l,variant:"outlined",children:"Genre Name"})},bt=l=>{const{color:t,colorMode:r}=v(),{id:n,name:i,isActive:h=!1,onClick:d}=l;return n&&i?e(b,{color:h?t:"gray",colorMode:r,renderRight:h?({colorMode:g,height:o})=>e(E,{colorMode:g,width:`${o}px`,height:`${o}px`,fontSize:`${o}px`,icon:"check",category:"outlined"}):void 0,onClick:()=>d(),variant:"outlined",children:i}):e(Le,{})},vt=l=>{const{color:t,colorMode:r}=v(),{allGenres:n=0,genres:i=0,onClear:h,onToggle:d}=l;return p(oe,{spacing:1,children:[e(b,{color:t,colorMode:r,isDisabled:n===0||i===0||i===n,onClick:()=>h(),size:"xs",variant:"text",children:"Clear"}),e(b,{color:t,colorMode:r,isDisabled:n===0,onClick:()=>d(),size:"xs",variant:"text",children:`${i===n?"Remove":"Select"} All`})]})},nr=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),{control:i,setValue:h}=l,d=Se(mt({mediaType:"movie"})),g=le(C=>C.options.data.genres.movie||[]),[o,u]=z.useState([...g]),[s,m]=z.useState(),{isFetching:a,isLoading:f,isError:R,isSuccess:D,refetch:M}=pt({props:{mediaType:"movie"},options:{enabled:!d&&o.length===0,onSuccess:({genres:C=[]})=>u([...C]),onError:C=>{var y;return m((y=C.response)==null?void 0:y.data)}}});return e(V,{control:i,name:"genres",render:({field:{onBlur:C,value:y=[],name:x}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:C,p:2,children:[e(ie,{renderTitle:c=>e(B,{...c,children:"Genres"}),actions:e(vt,{allGenres:o.length,genres:y.length,onClear:()=>h(x,w.genres,{shouldDirty:!0}),onToggle:()=>h(x,y.length===o.length?[]:[...o].map(({id:c})=>c),{shouldDirty:!0})})}),e(I,{children:!(a||f)&&R?e(L,{color:r,colorMode:n,children:p(j,{children:[e(me,{renderIcon:c=>e(E,{...c,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),p(H,{children:[e(Q,{}),e(K,{children:N({type:"error",label:"Genres"})})]}),s&&s.status_code&&s.status_message&&e(pe,{color:r,colorMode:n,children:e(ge,{children:`(${s.status_code}) ${s.status_message}`})}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length===0?e(L,{color:r,colorMode:n,children:p(j,{children:[p(H,{children:[e(Q,{}),e(K,{children:N({type:"empty",label:"Genres"})})]}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length>0?e(U,{width:"100%",spacing:1.5,children:o.map(({id:c,...F})=>e(Y,{children:e(bt,{...F,id:c,isActive:y.some(S=>S===c),onClick:()=>h(x,y.some(S=>S===c)?y.filter(S=>S!==c):[...y,c],{shouldDirty:!0})})},c))}):e(U,{width:"100%",spacing:1.5,children:$.range(15).map((c,F)=>e(Y,{children:e(Le,{})},F))})})]})})},or=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),{control:i,setValue:h}=l,d=Se(mt({mediaType:"tv"})),g=le(C=>C.options.data.genres.tv||[]),[o,u]=z.useState([...g]),[s,m]=z.useState(),{isFetching:a,isLoading:f,isError:R,isSuccess:D,refetch:M}=pt({props:{mediaType:"tv"},options:{enabled:!d&&o.length===0,onSuccess:({genres:C=[]})=>u([...C]),onError:C=>{var y;return m((y=C.response)==null?void 0:y.data)}}});return e(V,{control:i,name:"genres",render:({field:{onBlur:C,value:y=[],name:x}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:C,p:2,children:[e(ie,{renderTitle:c=>e(B,{...c,children:"Genres"}),actions:e(vt,{allGenres:o.length,genres:y.length,onClear:()=>h(x,w.genres,{shouldDirty:!0}),onToggle:()=>h(x,y.length===o.length?[]:[...o].map(({id:c})=>c),{shouldDirty:!0})})}),e(I,{children:!(a||f)&&R?e(L,{color:r,colorMode:n,children:p(j,{children:[e(me,{renderIcon:c=>e(E,{...c,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),p(H,{children:[e(Q,{}),e(K,{children:N({type:"error",label:"Genres"})})]}),s&&s.status_code&&s.status_message&&e(pe,{color:r,colorMode:n,children:e(ge,{children:`(${s.status_code}) ${s.status_message}`})}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length===0?e(L,{color:r,colorMode:n,children:p(j,{children:[p(H,{children:[e(Q,{}),e(K,{children:N({type:"empty",label:"Genres"})})]}),e(q,{renderActions:c=>e(b,{...c,onClick:M,children:"Try Again"})})]})}):!(a||f)&&D&&o&&o.length>0?e(U,{width:"100%",spacing:1.5,children:o.map(({id:c,...F})=>e(Y,{children:e(bt,{...F,id:c,isActive:y.some(S=>S===c),onClick:()=>h(x,y.some(S=>S===c)?y.filter(S=>S!==c):[...y,c],{shouldDirty:!0})})},c))}):e(U,{width:"100%",spacing:1.5,children:$.range(15).map((c,F)=>e(Y,{children:e(Le,{})},F))})})]})})},ir=({form:l,mediaType:t})=>{switch(t){case"movie":return e(nr,{form:l});case"tv":return e(or,{form:l})}},sr=({name:l,...t})=>{const{color:r,colorMode:n}=v(),i=Mt($.sample($.shuffle(Ne))||Ne[0]);return e($t,{...t,color:r,colorMode:n,autoComplete:"off",id:l,name:l,placeholder:`Try "${i}"`,isFullWidth:!0,renderLeftPanel:h=>e(E,{...$.omit(h,"color"),icon:"search",category:"outlined"})})},{getColor:rt}=Me,lr=({name:l,isActive:t=kt,onClick:r})=>{const n=W(),{color:i,colorMode:h}=v(),[d,{width:g}]=lt(),o=Ft({theme:n,color:i,colorMode:h,isActive:t});return p(ce,{width:"100%",alignItems:"center",justifyContent:"space-between",spacing:0,sx:o.keyword,children:[e(re,{width:`calc(100% - ${t?g:0}px)`,alignItems:"center",justifyContent:"flex-start",onClick:r,children:e(B,{align:"left",color:rt({theme:n,colorMode:h,type:"text.primary"}),fontSize:"lg",textTransform:"capitalize",noOfLines:1,children:l})}),t&&e(re,{ref:d,children:e(E,{width:n.fontSizes["2xl"],height:n.fontSizes["2xl"],fontSize:n.fontSizes["2xl"],color:rt({theme:n,colorMode:h,color:i,type:"color"}),colorMode:h,icon:"check"})})]})},cr=()=>{const l=W(),{colorMode:t}=v(),r=zt({theme:l,colorMode:t});return e(At,{width:"100%",sx:r.keyword,children:e(_t,{colorMode:t,isLoaded:!1,variant:"text",children:e(B,{align:"left",fontSize:"lg",noOfLines:1,children:"Keyword"})})})},ar=({id:l,onDelete:t})=>{const{color:r,colorMode:n}=v(),{data:i}=Bt({props:{id:l}});return i&&i.name?p(J,{color:r,colorMode:n,size:"sm",variant:"outlined",children:[e(X,{children:(i==null?void 0:i.name)||l}),e(ee,{onDelete:()=>t()})]}):null},dr=l=>{const{color:t,colorMode:r}=v(),{allKeywords:n=0,keywords:i=0,onClear:h,onToggle:d}=l;return p(oe,{spacing:1,children:[e(b,{color:t,colorMode:r,isDisabled:n===0||i===0||i===n,onClick:()=>h(),size:"xs",variant:"text",children:"Clear"}),e(b,{color:t,colorMode:r,isDisabled:n===0,onClick:()=>d(),size:"xs",variant:"text",children:`${i===n?"Remove":"Select"} All`})]})},{getColor:nt}=Me,ot=2,hr=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),{control:i,setValue:h}=l,[d,g]=z.useState(),[o,u]=z.useState(""),[s,m]=z.useState(""),a=ct(s),[f,R]=z.useState(),{isFetchingNextPage:D,isFetching:M,isLoading:C,isError:y,isSuccess:x,hasNextPage:c,fetchNextPage:F,refetch:S}=Rt({props:{query:a},options:{enabled:!!a,onSuccess:G=>{let T=[];G.pages.forEach(P=>{T=[...T,...(P==null?void 0:P.results)||[]]}),g({page:G.pages[G.pages.length-1].page,results:$.uniqBy([...T],"id"),total_pages:G.pages[G.pages.length-1].total_pages,total_results:G.pages[G.pages.length-1].total_results})},onError:G=>{var T;return R((T=G.response)==null?void 0:T.data)}}}),{observe:A}=Tt({onEnter:({unobserve:G})=>{G(),c&&F()}}),ae=z.useCallback($.debounce(()=>{m(o)},250),[o]);return z.useEffect(()=>ae(),[o]),e(V,{control:i,name:"keywords",render:({field:{onBlur:G,value:T=[],name:P}})=>{var je;return p(O,{colorMode:n,isFullWidth:!0,onBlur:G,p:ot,children:[e(ie,{renderTitle:k=>e(B,{...k,children:"Keywords"}),actions:d&&d.results&&d.results.length>0?e(dr,{allKeywords:d.results.length,keywords:T.length,onClear:()=>h(P,w.keywords,{shouldDirty:!0}),onToggle:()=>{var k;return h(P,T.length===(((k=d==null?void 0:d.results)==null?void 0:k.length)||0)?[]:[...(d==null?void 0:d.results)||[]].map(({id:te})=>te),{shouldDirty:!0})}}):void 0}),e(I,{children:p(ce,{width:"100%",divider:e(at,{colorMode:n}),spacing:ot,children:[T.length>0&&e(U,{width:"100%",spacing:1,children:T.map(k=>e(Y,{children:e(ar,{id:k,onDelete:()=>h(P,T.filter(te=>te!==k),{shouldDirty:!0})})},k))}),e(sr,{name:P,onChange:k=>u(k.target.value),value:o}),!!a&&e(re,{width:"100%",children:!(D||M||C)&&y?e(L,{color:r,colorMode:n,children:p(j,{children:[e(me,{renderIcon:k=>e(E,{...k,width:t.fontSizes["6xl"],height:t.fontSizes["6xl"],fontSize:t.fontSizes["6xl"],icon:"error_outline"}),p:2}),p(H,{children:[e(Q,{}),e(K,{children:N({type:"error",label:`"${a}" Keyword`})})]}),f&&f.status_code&&f.status_message&&e(pe,{color:r,colorMode:n,children:e(ge,{children:`(${f.status_code}) ${f.status_message}`})}),e(q,{renderActions:k=>e(b,{...k,onClick:S,children:"Try Again"})})]})}):!(D||M||C)&&x&&d&&d.results&&d.results.length===0?e(L,{color:r,colorMode:n,children:e(j,{children:p(H,{children:[e(Q,{}),e(K,{children:N({type:"empty",label:`"${a}" Keyword`})})]})})}):!(D||M||C)&&x&&d&&d.results&&d.results.length>0?p(Pe,{width:"100%",maxHeight:"350px",overflowY:"auto",spacing:1,children:[d.results.map(({id:k,...te},wt)=>{var He;return e(qe,{ref:wt===(((He=d==null?void 0:d.results)==null?void 0:He.length)||0)-1?A:null,width:"100%",children:e(lr,{...te,isActive:T.some(de=>de===k),onClick:()=>h(P,T.some(de=>de===k)?T.filter(de=>de!==k):[...T,k],{shouldDirty:!0})})},k)}),e(Et,{in:D||M||C,style:{width:"100%"},children:e(re,{width:"100%",children:e(Lt,{color:nt({theme:t,colorMode:n,color:r,type:"color"}),secondaryColor:nt({theme:t,colorMode:n,type:"divider"}),size:t.fontSizes["2xl"],thickness:160,speed:140})})})]}):e(Pe,{width:"100%",maxHeight:"350px",overflowY:"auto",spacing:1,children:$.range(((je=d==null?void 0:d.results)==null?void 0:je.length)||5).map((k,te)=>e(qe,{children:e(cr,{})},te))})})]})})]})}})},ur=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),[i]=ne(`(min-width: ${t.breakpoints.md})`),{control:h,setValue:d}=l;return e(V,{control:h,name:"rating",render:({field:{onBlur:g,value:o,name:u}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:g,p:2,children:[e(be,{title:"Rating Range",subtitle:"",renderMessage:({fontSize:s})=>e(Wt,{rating:o.join(" -> "),size:s}),renderButton:s=>e(b,{...s,isDisabled:o.length===0,onClick:()=>d(u,w.rating,{shouldDirty:!0}),children:"Clear"}),isMessageVisible:o.length>0}),e(I,{children:e(Ee,{sx:{width:"100%",flexWrap:i?"wrap":"nowrap"},children:Ue.map((s,m)=>e(We,{index:m,total:Ue.length-1,sx:{flex:i?1:void 0,width:i?`${100/6}%`:"auto"},children:e(b,{color:Ge({list:ye(o),number:s})?r:"gray",colorMode:n,isFullWidth:!0,onClick:()=>d(u,Ve({list:ye(o),number:s}),{shouldDirty:!0}),variant:o.some(a=>a===s)?"contained":"outlined",children:$.toString(s)})},s))})})]})})},mr=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),[i]=ne(`(min-width: ${t.breakpoints.md})`),{control:h,setValue:d}=l;return e(V,{control:h,name:"runtime",render:({field:{onBlur:g,value:o,name:u}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:g,p:2,children:[e(be,{title:"Runtime Range",subtitle:"",renderMessage:s=>e(B,{...s,children:o.map(m=>`${m} minutes`).join(" -> ")}),renderButton:s=>e(b,{...s,isDisabled:o.length===0,onClick:()=>d(u,w.runtime,{shouldDirty:!0}),children:"Clear"}),isMessageVisible:o.length>0}),e(I,{children:e(Ee,{sx:{width:"100%",flexWrap:i?"wrap":"nowrap"},children:Ye.map((s,m)=>e(We,{index:m,total:Ye.length-1,sx:{flex:i?1:void 0,width:i?`${100/6}%`:"auto"},children:e(b,{color:Ge({list:ye(o),number:s})?r:"gray",colorMode:n,isFullWidth:!0,onClick:()=>d(u,Ve({list:ye(o),number:s}),{shouldDirty:!0}),variant:o.some(a=>a===s)?"contained":"outlined",children:$.toString(s)})},s))})})]})})},wr=l=>{const{color:t,colorMode:r}=v(),{spacing:n}=$e(),{isOpen:i,onOpen:h,onClose:d}=Fe(),g=xe(),{renderButton:o,mediaType:u,onFilter:s}=l,m=gt({defaultValues:w}),{control:a,setValue:f,reset:R,handleSubmit:D}=m,M=Gt({control:a}),{isDirty:C}=yt({control:a}),y=z.useCallback(()=>{R({...we({location:g,mediaType:u})}),h()},[g,u,we]),x=()=>{f("dates",w.dates,{shouldDirty:!0}),f("genres",w.genres,{shouldDirty:!0}),f("certifications",w.certifications,{shouldDirty:!0}),f("rating",w.rating,{shouldDirty:!0}),f("count",w.count,{shouldDirty:!0}),f("runtime",w.runtime,{shouldDirty:!0}),f("keywords",w.keywords,{shouldDirty:!0})},c=()=>{R({...w}),d()},F=z.useCallback(S=>{s({...S}),d(),setTimeout(()=>R({...S}),500)},[]);return p(ke,{children:[o({color:i?t:"gray",colorMode:r,icon:e(E,{colorMode:r,icon:"visibility",category:i?"filled":"outlined"}),onClick:()=>y()}),e(ze,{colorMode:r,isOpen:i,onClose:c,size:"5xl",children:p(Ae,{as:Vt,onSubmit:D(F),children:[e(_e,{renderTitle:S=>e(B,{...S,children:`Filter ${fe({type:"multiple",mediaType:u})}`}),renderSubtitle:S=>e(B,{...S,children:`Filter ${fe({type:"multiple",mediaType:u})} by Release Date, Genres, Certifications, Rating, Number of Ratings, Runtime & by Keywords.`}),renderCancel:({icon:S,category:A,...ae})=>e(ue,{...ae,children:e(Ce,{icon:S,category:A})})}),e(Be,{children:p(ce,{width:"100%",spacing:n,children:[e(rr,{form:m,mediaType:u}),e(ir,{form:m,mediaType:u}),e(er,{form:m,mediaType:u}),e(ur,{form:m}),e(tr,{form:m}),e(mr,{form:m}),e(hr,{form:m})]})}),e(Te,{renderCancel:S=>e(b,{...S,children:"Cancel"}),renderAction:S=>p(oe,{children:[e(Ot,{in:C||!$.isEqual(w,M),children:e(b,{...S,color:t,onClick:x,variant:"text",children:"Reset"})}),e(b,{...S,color:t,isDisabled:!C,type:"submit",children:"Filter"})]})})]})})]})},pr=({form:l,sortBy:t})=>{const{color:r,colorMode:n}=v(),{control:i,setValue:h}=l;return e(V,{control:i,name:"sortBy",render:({field:{onBlur:d,value:g,name:o}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:d,p:2,children:[e(ie,{renderTitle:u=>e(B,{...u,children:"Sort by"}),renderSubtitle:u=>e(B,{...u,children:"Click on the button to select how the data will be sorted by"})}),e(I,{children:e(ce,{width:"100%",spacing:2,children:t.map(u=>e(b,{color:u.value===g.value?r:"gray",colorMode:n,renderRight:({color:s,colorMode:m,height:a})=>e(Oe,{in:u.value===g.value,children:e(E,{width:`${a}px`,height:`${a}px`,fontSize:`${a}px`,colorMode:m,icon:"check",category:"outlined",skeletonColor:s})}),isFullWidth:!0,onClick:u.value!==g.value?()=>h(o,u,{shouldDirty:!0}):void 0,size:"lg",variant:"outlined",children:u.label},u.value))})})]})})},gr=[{label:"Ascending order",value:"asc",icon:"arrow_upward"},{label:"Descending order",value:"desc",icon:"arrow_downward"}],yr=({form:l})=>{const t=W(),{color:r,colorMode:n}=v(),[i]=ne(`(max-width: ${t.breakpoints.sm})`),{control:h,setValue:d}=l;return e(V,{control:h,name:"direction",render:({field:{onBlur:g,value:o,name:u}})=>p(O,{colorMode:n,isFullWidth:!0,onBlur:g,p:2,children:[e(ie,{renderTitle:s=>e(B,{...s,children:"Direction"}),renderSubtitle:s=>e(B,{...s,children:"Select the direction of the sort, either in Ascending or Descending order"})}),e(I,{children:e(De,{width:"100%",direction:i?"column":"row",spacing:2,children:gr.map(s=>e(b,{color:o===s.value?r:"gray",colorMode:n,renderLeft:({color:m,colorMode:a,height:f})=>e(E,{width:`${f}px`,height:`${f}px`,fontSize:`${f}px`,colorMode:a,icon:s.icon,category:"outlined",skeletonColor:m}),renderRight:({color:m,colorMode:a,height:f})=>e(Oe,{in:o===s.value,children:e(E,{width:`${f}px`,height:`${f}px`,fontSize:`${f}px`,colorMode:a,icon:"check",category:"outlined",skeletonColor:m})}),isFullWidth:!0,onClick:o!==s.value?()=>d(u,s.value,{shouldDirty:!0}):void 0,size:"lg",variant:"outlined",children:s.label},s.value))})})]})})},xr=l=>{const{color:t,colorMode:r}=v(),{spacing:n}=$e(),{isOpen:i,onOpen:h,onClose:d}=Fe(),g=xe(),{mediaType:o,renderButton:u,onSort:s}=l,m=gt({defaultValues:he}),{control:a,getValues:f,setValue:R,reset:D,handleSubmit:M}=m,{isDirty:C}=yt({control:a}),y=z.useCallback(()=>{D({...Ze({location:g,mediaType:o})}),h()},[g,o,Ze]),x=()=>{R("sortBy",he.sortBy,{shouldDirty:!0}),R("direction",he.direction,{shouldDirty:!0})},c=()=>{D({...he}),d()},F=z.useCallback(S=>{s({...S}),d(),setTimeout(()=>D({...S}),500)},[]);return p(ke,{children:[u({color:i?t:"gray",colorMode:r,icon:e(E,{colorMode:r,icon:"import_export",category:i?"filled":"outlined"}),onClick:()=>y()}),e(ze,{colorMode:r,isOpen:i,onClose:c,size:"4xl",children:p(Ae,{children:[e(_e,{renderTitle:S=>e(B,{...S,children:`Sorting ${fe({type:"multiple",mediaType:o})}`}),renderSubtitle:S=>e(B,{...S,children:`Sort ${fe({type:"multiple",mediaType:o})} by ${[...o==="movie"?Je:Xe].map(({label:A})=>A).join(", ")} & by either in Ascending or Descending order.`}),renderCancel:({icon:S,category:A,...ae})=>e(ue,{...ae,children:e(Ce,{icon:S,category:A})})}),e(Be,{children:p(ce,{width:"100%",spacing:n,children:[e(pr,{form:m,sortBy:o==="movie"?[...Je]:[...Xe]}),e(yr,{form:m})]})}),e(Te,{renderCancel:S=>e(b,{...S,children:"Cancel"}),renderAction:S=>p(oe,{children:[e(Oe,{in:C||!$.isEqual(he,f()),children:e(b,{...S,color:t,onClick:x,variant:"text",children:"Reset"})}),e(b,{...S,color:t,isDisabled:!C,onClick:M(F),children:"Sort"})]})})]})})]})};export{vr as D,wr as F,xr as S};
