import{a6 as y,a7 as U,a8 as k,af as j,U as ee,b6 as H,E as e,ca as ne,c6 as P,al as R,N as f,cb as ie,cc as oe,ai as le,cd as re,ce as de,cf as q,cg as ce,aQ as E,eY as te,cx as A,d6 as he,d7 as N,eZ as pe,cV as ue,db as be,cX as me,x,aZ as Le,a_ as fe,cY as Ce,cw as Te,ah as I,a$ as ge,V as F,cB as W,aj as ye,aI as Me,cy as ve,dk as Y,bN as Oe,dl as Se,b7 as De,L as xe,as as se,c5 as _e,aR as ae,c8 as _,ap as Z,aO as Ee,M as Ae,aC as Ie,T as ke,aH as we,K as ze,aV as G,e_ as Be}from"./useUserTheme-cad0e91d.js";import{G as $e,H as Fe}from"./index-789eed9b.js";import{T as K}from"./index-6fc29f67.js";const Ue=0,$=y.memoize(({mediaItems:{movie:a=[],tv:n=[]}})=>a.length+n.length),Q=y.memoize(({lists:a=[],list:n})=>a.findIndex(({id:i})=>i===n.id)+1);y.memoize(({lists:a=[],list:n})=>a.find(({id:i})=>i===n.id));const je=({list:a,isOpen:n,onClose:i,onDelete:c})=>{const h=U(),{colorMode:b}=k(),{spacing:M}=j(),C=ee(),{id:T,lists:v=[]}=H(o=>o.users.data.activeUser.data),m=()=>{const o=v.filter(({id:p})=>p!==a.id);C(te({id:T,data:A([...o]).desc(({createdAt:p})=>p)})),c&&c(),i()};return e(ne,{colorMode:b,renderCancel:({icon:o,category:p,...g})=>e(P,{...g,children:e(R,{icon:o,category:p})}),isOpen:n,onClose:i,children:f(ie,{spacing:M,p:M,children:[e(oe,{renderIcon:o=>e(le,{...o,width:h.fontSizes["6xl"],height:h.fontSizes["6xl"],fontSize:h.fontSizes["6xl"],icon:"delete_forever",category:"outlined"}),color:"red",p:2}),f(re,{children:[e(de,{children:"Delete List?"}),e(q,{children:`Are you sure you want to delete the selected ${a?`"${a.label}"`:""}`}),e(q,{children:"This action is irreversible!"})]}),e(ce,{renderCancel:o=>e(E,{...o,children:"Cancel"}),renderAction:o=>e(E,{...o,color:"red",isDisabled:!T,onClick:m,children:"Delete"})})]})})},He=he().shape({label:N().required().label("Label"),description:N().label("Description")}),X=y.sample(pe),J={label:"",description:""},Pe=({list:a,isOpen:n,onClose:i})=>{const c=U(),{color:h,colorMode:b}=k(),{spacing:M}=j(),C=ee(),{id:T,lists:v=[]}=H(s=>s.users.data.activeUser.data),{control:m,reset:o,handleSubmit:p}=ue({defaultValues:J,resolver:be(He)}),{isDirty:g}=me({control:m}),w=()=>{C(Y({...Se})),i()},O=()=>{g?C(Y({isOpen:!0,title:"Unsubmitted Changes!",subtitle:"Are you sure you want to cancel editing the list? Once you close the page you will not be able to retrieve the changed data!",onConfirm:()=>w()})):i()},u=s=>{const{label:r,description:l}=s,L={...a,label:r,description:l,updatedAt:Oe(new Date).toISOString()},S=[...v.filter(({id:D})=>D!==a.id),L];C(te({id:T,data:A([...S]).desc(({createdAt:D})=>D)})),o({...s}),i()},z=()=>{o({...J,label:a.label,description:a.description})};return x.useEffect(()=>z(),[n]),e(Le,{colorMode:b,isOpen:n,onClose:O,size:"lg",children:f(fe,{as:Ce,onSubmit:p(u),children:[e(Te,{renderTitle:s=>e(I,{...s,children:"Edit List"}),renderSubtitle:s=>e(I,{...s,children:`Edit the existing "${a.label}" list label & description`}),renderCancel:({icon:s,category:r,...l})=>e(P,{...l,children:e(R,{icon:s,category:r})})}),e(ge,{children:f(F,{width:"100%",spacing:M,children:[e(W,{control:m,name:"label",render:({field:{onChange:s,onBlur:r,value:l,name:L},fieldState:{error:d}})=>e(ye,{color:h,colorMode:b,label:"Label",name:L,helper:d?d.message:void 0,placeholder:`Try "${X}"`,isError:y.isBoolean(d),isFullWidth:!0,isRequired:!0,onBlur:r,onChange:s,value:l})}),e(W,{control:m,name:"description",render:({field:{onChange:s,onBlur:r,value:l,name:L},fieldState:{error:d}})=>e(Me,{color:h,colorMode:b,label:"Description",name:L,helper:d?d.message:void 0,placeholder:`Try "A list containing ${X} ..."`,isError:y.isBoolean(d),isFullWidth:!0,onBlur:r,onChange:s,value:l,sx:{textarea:{height:c.space[12.5]}}})})]})}),e(ve,{renderCancel:s=>e(E,{...s,children:"Cancel"}),renderAction:s=>e(E,{...s,color:h,isDisabled:!T||!g,type:"submit",children:"Update List"})})]})})},Re=({onCreateListOpen:a})=>{const{colorMode:n}=k(),[i,c]=De();return f(xe,{alignItems:"stretch",justifyContent:"stretch",spacing:1,ml:1,children:[e(se,{colorMode:n,orientation:"vertical",my:.5}),e(_e,{"aria-label":"Open Create List Modal (tooltip)",colorMode:n,isOpen:i,placement:"top-end",label:"Create List",children:e(P,{"aria-label":"Open Create List Modal",colorMode:n,onClick:()=>a(),onMouseEnter:()=>c.on(),onMouseLeave:()=>c.off(),variant:"icon",children:e(R,{icon:"add",category:"outlined"})})})]})},Ve=x.lazy(()=>ae(()=>import("./index-a5bb8f4f.js"),["assets/index-a5bb8f4f.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-789eed9b.js","assets/index-f91c493c.js","assets/index-8754a0a6.js","assets/index-da6fdb45.js","assets/dimensions-1922ff5f.js","assets/index-490c57f0.js","assets/index-fac269b5.js","assets/index-86281d15.js","assets/index-65752566.js","assets/index-6c03e0d3.js","assets/index-566ac3e3.js","assets/index-059dc8bd.js","assets/index-67fb8a4b.js","assets/index-278c1566.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/index-a6d2ef26.js","assets/index-6b3e9b0b.js","assets/tabs-8cea7072.js","assets/index-0775bdaa.css","assets/index-6fc29f67.js"])),qe=x.lazy(()=>ae(()=>import("./index-92c55b8e.js"),["assets/index-92c55b8e.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-789eed9b.js","assets/index-f91c493c.js","assets/index-8754a0a6.js","assets/index-da6fdb45.js","assets/dimensions-1922ff5f.js","assets/index-490c57f0.js","assets/index-fac269b5.js","assets/index-86281d15.js","assets/index-65752566.js","assets/index-6c03e0d3.js","assets/index-566ac3e3.js","assets/index-059dc8bd.js","assets/index-67fb8a4b.js","assets/index-278c1566.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/index-a6d2ef26.js","assets/index-6b3e9b0b.js","assets/tabs-8cea7072.js","assets/index-0775bdaa.css"])),Ne=()=>{const a=U(),{color:n,colorMode:i}=k(),{isOpen:c,onOpen:h,onClose:b}=_(),{isOpen:M,onOpen:C,onClose:T}=_(),{isOpen:v,onOpen:m,onClose:o}=_(),{isOpen:p,onOpen:g,onClose:w}=_(),{spacing:O}=j(),u=H(t=>t.users.data.activeUser.data.lists||[]),[z,s]=x.useState(Ue),r=Z(z),[l,L]=x.useState(),d=Z(l),S=({index:t})=>{s(t),L(u.find((V,B)=>B===t-1))},D=()=>{b(),S({index:0})};return f(Ee,{children:[f(F,{width:"100%",divider:e(se,{colorMode:i,mt:`${a.space[O]} !important`}),spacing:0,children:[e(Ae,{width:"100%",py:O*2,children:e(Ie,{width:"100%",renderCaption:()=>e(K,{color:n,colorMode:i,prefix:"Total of",suffix:u.length===1?"list":"lists",total:u.length,variant:"contained"}),renderTitle:t=>e(I,{...t,children:"My Lists"}),renderSubtitle:t=>e(I,{...t,children:"This Tab contains all the lists that you have created and all the bookmarks that have been added to the list and all are separated into their respective tab depending on the media type."})})}),e(ke,{width:"100%",color:n,colorMode:i,activeTab:r,onChange:S,size:"lg",children:f(F,{width:"100%",spacing:O,children:[e(we,{tabs:[{label:"All"},...A(u).desc(({updatedAt:t})=>t).map(t=>({label:t.label,isDisabled:$(t)===0,renderRight:$(t)>0?({color:V,...B})=>e(K,{...B,color:r===Q({lists:u,list:t})?V:"gray",total:$(t),variant:r===Q({lists:u,list:t})?"contained":"outlined"}):void 0}))],renderRight:()=>e(Re,{onCreateListOpen:C})}),e(ze,{children:y.compact([e(G,{fallback:e($e,{}),children:e(Ve,{selectedList:d,isListActionsOpen:c,onTabChange:S,onSetSelectedList:t=>L(t),onEditList:m,onDeleteList:g,onListActionsOpen:h,onListActionsClose:b})},"ds-edb-MyListsTabs-AllTab"),...A(u).desc(({updatedAt:t})=>t).map(t=>e(G,{fallback:e(Fe,{}),children:e(qe,{list:t,onEditList:m,onDeleteList:g})},`ds-edb-MyListsTabs-ListTab-${t.label}`))])})]})})]}),e(Be,{isOpen:M,onClose:T}),l&&e(Pe,{list:l,isOpen:v,onClose:o}),l&&e(je,{list:l,isOpen:p,onClose:w,onDelete:D})]})},Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"}));export{Q as a,$ as g,Ge as i};
