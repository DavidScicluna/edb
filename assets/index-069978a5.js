import{a8 as C,b6 as x,b7 as re,N as L,E as e,dF as de,aQ as F,ai as H,ao as D,ea as ce,x as o,a6 as P,bN as A,dH as G,a7 as K,aL as j,dE as le,dI as pe,dJ as me,ae as ue,aR as f,dC as ge,a9 as Te,af as ve,dK as be,aa as ye,c9 as he,U as fe,ap as _e,dL as Ve,eb as we,dO as De,dP as Ie,ec as Se,ed as Ee,aq as Pe,ar as Le,ag as Ae,ah as Re,T as ke,V as xe,aH as Ce,K as $e,aV as h,bd as Oe,cj as ze}from"./useUserTheme-cad0e91d.js";import{c as Me,V as Qe}from"./index-da6fdb45.js";import{P as Be,a as Ne,b as Ue}from"./index-f91c493c.js";import{V as Fe}from"./index-65752566.js";import{V as He,a as je}from"./index-cc453732.js";import{T as Ge}from"./index-6fc29f67.js";import{V as Ke,a as We,b as qe}from"./index-21c2c4e5.js";import{V as Je}from"./index-5e29d59e.js";import{T as Xe,a as Ye,t as k,i as Ze,j as et,s as tt,k as at,r as st,p as it,v as ot,D as nt,b as rt,c as dt,d as ct,e as lt,f as pt,g as mt,h as ut}from"./tabs-1769093c.js";import{V as gt,a as Tt,b as vt}from"./index-43080e55.js";import{g as bt}from"./user-1d41ba74.js";import{V as yt}from"./index-490c57f0.js";import{V as ht}from"./index-d96d68db.js";import"./index-c7b185ee.js";import"./dimensions-1922ff5f.js";import"./index-566ac3e3.js";import"./index-6c03e0d3.js";import"./index-67fb8a4b.js";import"./index-a6d2ef26.js";import"./index-278c1566.js";import"./formats-993363c7.js";const ft=({show:d,..._})=>{const{color:g,colorMode:c}=C(),{mediaItem:l,isOpen:i}=x(p=>p.modals.ui.bookmarkModal),{id:n,name:r=""}=d,[v,b]=re();return L(yt,{..._,children:[e(de,{renderAction:({iconType:p,iconCategory:m,isDisabled:u,isLiked:V,onClick:w})=>e(F,{color:V?"red":"gray",colorMode:c,renderLeft:()=>e(H,{icon:p,category:m}),isDisabled:u||!d,isFullWidth:!0,onClick:T=>{T.preventDefault(),T.stopPropagation(),w()},size:"lg",variant:"outlined",children:V?`Dislike ${D({type:"single",mediaType:"tv"})}`:`Like ${D({type:"single",mediaType:"tv"})}`}),title:r,mediaType:"tv",mediaItem:d}),e(ce,{renderAction:({iconType:p,iconCategory:m,isDisabled:u,isBookmarked:V,isBookmarkedMultiple:w,onClick:T})=>e(F,{color:i&&(l==null?void 0:l.id)===n||V||w?g:"gray",colorMode:c,renderLeft:()=>e(H,{icon:p,category:m}),isDisabled:u,isFullWidth:!0,onClick:I=>{I.preventDefault(),I.stopPropagation(),T()},onMouseEnter:()=>b.on(),onMouseLeave:()=>b.off(),size:"lg",variant:"outlined",children:V?`Remove ${D({type:"single",mediaType:"tv"})} from ${w?"lists":"list"}`:`Add ${D({type:"single",mediaType:"tv"})} to a list`}),title:r,mediaType:"tv",mediaItem:d,isHovering:v})]})},_t=({show:d})=>{const{status:_,popularity:g,first_air_date:c,last_air_date:l,content_ratings:i,episode_run_time:n=[],spoken_languages:r=[]}=d,[v,b]=o.useState(),p=o.useCallback(P.debounce(()=>{const m=((i==null?void 0:i.results)||[]).find(({iso_3166_1:u})=>u==="US");if(m)return b(m)},250),[i]);return o.useEffect(()=>p(),[i]),e(Me,{children:P.compact([v?e(Ke,{mediaType:"tv",certification:v.rating},"ds-edb-tv-show-info-certification"):null,g?e(He,{popularity:g},"ds-edb-tv-show-info-popularity"):null,c?e(gt,{mediaType:"tv",startDate:c,endDate:_!=="Returning Series"?l:A(new Date).add(1,"y").toISOString()},"ds-edb-tv-show-info-date"):null,n.length>0?e(We,{mediaType:"tv",runtime:n.reduce((m,u)=>m+u,0)/(n.length||0)},"ds-edb-tv-show-info-runtime"):null,r.length>0?e(Tt,{languages:r},"ds-edb-tv-show-info-languages"):null])})},{getHue:Vt}=ue,wt=G({type:"poster",mode:"thumbnail"}),Dt=G({type:"poster",mode:"full"}),It=({show:d,onClick:_,...g})=>{const c=K(),{colorMode:l}=C(),{id:i,name:n,poster_path:r}=d||{},v=j(n?`${n} ${D({type:"single",mediaType:"tv"})} poster`:`${D({type:"single",mediaType:"tv"})} poster`),b=j(le());return e(ht,{...g,alt:v,onClick:_,src:{boring:pe({id:i?String(i):b,colors:P.omit({...c.colors},["transparent","black","white"]),hue:Vt({colorMode:l,type:"color"}),size:500,variant:me({mediaType:"tv"})}),thumbnail:`https://image.tmdb.org/t/p/${wt}${r}`,full:`https://image.tmdb.org/t/p/${Dt}${r}`}})},St=o.lazy(()=>f(()=>import("./index-14a85289.js"),["assets/index-14a85289.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useTVShowContext-6c09d282.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-5e29d59e.js","assets/index-98cf844d.js","assets/index-3c387dce.js","assets/index-c20f4d73.js","assets/tabs-1769093c.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-65752566.js","assets/index-d275f317.js","assets/index-6409f3e0.js","assets/index-6a4e7d59.js","assets/index-b0754bf1.js","assets/index-9f080699.js","assets/index-6fc29f67.js","assets/index-88486953.js","assets/index-f93cc2e8.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Et=o.lazy(()=>f(()=>import("./index-07b110c9.js"),["assets/index-07b110c9.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useTVShowContext-6c09d282.js","assets/index-7571088f.js","assets/index-6fc29f67.js","assets/index-233a8912.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Pt=o.lazy(()=>f(()=>import("./index-4f61d49e.js"),["assets/index-4f61d49e.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useTVShowContext-6c09d282.js","assets/index-7571088f.js","assets/index-6fc29f67.js","assets/index-82200d96.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Lt=o.lazy(()=>f(()=>import("./index-1d36fb99.js"),["assets/index-1d36fb99.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useTVShowContext-6c09d282.js","assets/index-6fc29f67.js","assets/index-76bf374f.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-5e29d59e.js","assets/index-88486953.js","assets/index-f93cc2e8.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/tabs-1769093c.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),At=o.lazy(()=>f(()=>import("./index-5f4fb349.js"),["assets/index-5f4fb349.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useTVShowContext-6c09d282.js","assets/index-e16e8c9e.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-278c1566.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-a6d2ef26.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Rt=o.lazy(()=>f(()=>import("./index-bd905eec.js"),["assets/index-bd905eec.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useTVShowContext-6c09d282.js","assets/index-85a5a262.js","assets/index-566ac3e3.js","assets/index-5e29d59e.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-9f080699.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),kt=o.lazy(()=>f(()=>import("./index-a16cb882.js"),["assets/index-a16cb882.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useTVShowContext-6c09d282.js","assets/index-f93cc2e8.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-d275f317.js","assets/index-a6d2ef26.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),xt=o.lazy(()=>f(()=>import("./index-ba469544.js"),["assets/index-ba469544.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useTVShowContext-6c09d282.js","assets/index-a6d2ef26.js","assets/index-d275f317.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/tabs-1769093c.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-278c1566.js","assets/index-490c57f0.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Ct=o.createContext({onSetActiveTab:ge}),aa=()=>{const d=K(),{color:_,colorMode:g}=C(),[c]=Te(`(max-width: ${d.breakpoints.sm})`),{isGuest:l,spacing:i}=ve(),{id:n}=be(),r=ye(),v=he(),b=fe(),{id:p,recentlyViewed:m}=x(s=>s.users.data.activeUser.data),u=x(s=>{var a;return((a=s.users.data.activeUser.data.reviews.user.tv.find(({mediaItem:y})=>(y==null?void 0:y.id)===n))==null?void 0:a.reviews.length)||0}),[V,w]=o.useState(0),T=_e(V),I=Ve({props:{mediaType:"tv",id:Number(n)},config:{params:{append_to_response:"content_ratings"}},options:{onSuccess:s=>{p!==Oe.data.id&&b(ze({id:p,data:bt({recentlyViewed:m,mediaType:"tv",mediaItem:s})}))}}}),{data:t,isFetching:S,isLoading:E}=I,{seasons:R=[]}=t||{},$=we({props:{mediaType:"tv",id:Number(n),isAggregated:!0},options:{enabled:!!(t!=null&&t.id)}}),{data:W}=$,{cast:q=[],crew:J=[]}=W||{},{data:O,isFetching:X,isLoading:Y}=De({props:{mediaType:"tv",id:Number(n)},options:{enabled:!!(t!=null&&t.id)}}),z=Ie({props:{mediaType:"tv",id:Number(n)},options:{enabled:!!(t!=null&&t.id)}}),{posters:Z=[],backdrops:ee=[]}=z.data||{},M=Se({props:{mediaType:"tv",id:Number(n)},options:{enabled:!!(t!=null&&t.id)}}),{results:te=[]}=M.data||{},Q=Ee({props:{mediaType:"tv",id:Number(n)},options:{enabled:!!(t!=null&&t.id)}}),{pages:B=[]}=Q.data||{},[ae,se]=o.useState(0),[ie,oe]=o.useState(0),N=({index:s})=>{const a=k.find((y,ne)=>s===ne);a&&a.path&&v({...r,...a.path})},U=()=>{const s=r.hash.replaceAll("#",""),a=k.findIndex(({path:y})=>y.hash===s);w(a>=0?a:0)};return Pe(()=>r.hash.length>0?U():void 0),Le(()=>U(),[r.hash]),o.useEffect(()=>{se(R.reduce((s,{episode_count:a=0})=>s+a,0))},[R]),o.useEffect(()=>{oe(u+B.reduce((s,{results:a=[]})=>s+a.length,0))},[u,B]),e(Ct.Provider,{value:{showQuery:I,creditsQuery:$,reviewsQuery:Q,imagesQuery:z,videosQuery:M,onSetActiveTab:N},children:L(Be,{children:[t&&t.name&&t.first_air_date&&A(A(t.first_air_date)).isAfter(A(new Date))&&e(vt,{mediaType:"tv",title:t.name,date:t.first_air_date}),e(Ne,{renderLeftPanel:T!==0&&(S||E)?()=>e(Qe,{}):T!==0?()=>e(It,{show:t}):void 0,renderTitle:s=>e(Ae,{colorMode:g,isLoaded:!!(t!=null&&t.name)&&!(S||E),variant:"text",children:e(Re,{...s,children:t==null?void 0:t.name})}),renderSubtitle:S||E?()=>e(Xe,{}):t?()=>e(_t,{show:t}):void 0,actions:S||E?e(Je,{}):t&&t.vote_average?e(qe,{rating:t.vote_average,count:t.vote_count}):void 0,direction:"row",spacing:i,p:i}),!l&&(S||E)?e(Ye,{p:i}):!l&&t?e(ft,{show:t,p:i}):null,e(Ue,{px:i,pb:i,children:e(ke,{width:"100%",height:"100%",color:_,colorMode:g,activeTab:T,onChange:N,size:"xl",children:L(xe,{width:"100%",height:"100%",spacing:i,children:[e(Ce,{tabs:k.map((s,a)=>({label:s.label,renderRight:s.getTotalBadgeProps?y=>s.getTotalBadgeProps?e(Ge,{...s.getTotalBadgeProps({...y,total:a===Ze?q.length:a===et?J.length:a===tt?R.length:a===at?ae:a===st?ie:a===it?Z.length+ee.length:a===ot?te.length:0,isActive:T===a})}):void 0:void 0})),renderRight:!c&&(X||Y)?()=>e(Fe,{}):!c&&P.keys(P.pick(O,["facebook_id","twitter_id","instagram_id","imdb_id"])).length>0?()=>e(je,{socials:{...O,homepage_id:t==null?void 0:t.homepage}}):void 0}),L($e,{children:[e(h,{fallback:e(nt,{}),children:e(St,{})}),e(h,{fallback:e(rt,{}),children:e(Et,{})}),e(h,{fallback:e(dt,{}),children:e(Pt,{})}),e(h,{fallback:e(ct,{}),children:e(kt,{})}),e(h,{fallback:e(lt,{}),children:e(xt,{})}),e(h,{fallback:e(pt,{}),children:e(Lt,{})}),e(h,{fallback:e(mt,{}),children:e(At,{})}),e(h,{fallback:e(ut,{}),children:e(Rt,{})})]})]})})})]})})};export{Ct as TVShowContext,aa as default};
