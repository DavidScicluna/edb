import{x as h,a7 as I,a8 as x,b7 as se,ar as te,E as e,c5 as ae,ao as ne,bN as L,bM as q,M as Te,aP as k,aw as N,c1 as Ee,ai as D,ah as Q,ae as ie,a6 as w,dH as re,aL as C,dE as we,dI as Ie,dJ as xe,a9 as $,dK as z,aQ as de,af as ce,ap as M,N as E,V as le,L as K,aR as S,dC as Se,aa as Ve,c9 as $e,dL as Pe,dV as De,dW as Ce,dX as Le,dY as Ae,aq as Me,ag as ke,T as Ne,aH as Qe,K as ze,aV as T}from"./useUserTheme-cad0e91d.js";import{E as Oe,a as Be,t as A,g as Re,h as je,i as He,p as We,v as Fe,D as Ge,b as Ue,c as qe,d as Ke,e as Je,f as Xe}from"./index-6b3e9b0b.js";import{b as pe,c as Ye,V as J}from"./index-da6fdb45.js";import{P as Ze,a as eo,b as oo}from"./index-f91c493c.js";import{T as so}from"./index-6fc29f67.js";import{T as to}from"./index-86281d15.js";import{V as ao}from"./index-5e29d59e.js";import{V as no,a as io,b as ro}from"./index-21c2c4e5.js";import{V as co}from"./index-d96d68db.js";import{d as X}from"./formats-993363c7.js";const ue=()=>({...h.useContext(O)}),{getColor:Y}=ie,lo=({air_date:d})=>{const r=I(),{color:c,colorMode:s}=x(),[t,a]=se(),[o,i]=h.useState(Y({theme:r,colorMode:s,color:t?c:"gray",type:t?"color":"text.secondary"}));return te(()=>{i(Y({theme:r,colorMode:s,color:t?c:"gray",type:t?"color":"text.secondary"}))},[t]),e(ae,{"aria-label":"Show full date (tooltip)",colorMode:s,isOpen:t,placement:"bottom-start",label:`${ne({type:"single",mediaType:"tv"})} Episode ${L(d).isBefore(new Date)?"was":"will be"} released on ${q({date:d})}`,shouldWrapChildren:!0,children:e(Te,{children:e(k,{colorMode:s,to:{pathname:`/${N({mediaType:"tv"})}`,search:Ee.stringify({"first_air_date.gte":L(d).format(X),"first_air_date.lte":L(new Date).format(X)})},children:e(pe,{renderIcon:n=>e(D,{...n,color:o,icon:"schedule",category:"outlined"}),renderLabel:n=>e(Q,{...n,color:o,children:q({date:d,section:"year"})}),onMouseEnter:()=>a.on(),onMouseLeave:()=>a.off()})})})})},po=({name:d,season_number:r,episode_number:c})=>{const{colorMode:s}=x(),[t,a]=se();return e(ae,{"aria-label":"Show full season & episode numbers (tooltip)",colorMode:s,isOpen:t,placement:"bottom-start",label:w.compact([d,`Season ${r}`,`Episode ${c}`]).join(" • "),shouldWrapChildren:!0,children:e(pe,{renderIcon:o=>e(D,{...o,icon:"tag",category:"outlined"}),renderLabel:o=>e(Q,{...o,children:w.compact([d,`S${r}`,`E${c}`]).join(" • ")}),onMouseEnter:()=>a.on(),onMouseLeave:()=>a.off()})})},uo=({episode:d})=>{const{showQuery:r}=ue(),{data:c}=r||{},{name:s,content_ratings:t}=c||{},{air_date:a,season_number:o,episode_number:i,runtime:n}=d,[p,V]=h.useState(),u=h.useCallback(w.debounce(()=>{const f=((t==null?void 0:t.results)||[]).find(({iso_3166_1:l})=>l==="US");if(f&&f)return V(f)},250),[t]);return h.useEffect(()=>u(),[t]),e(Ye,{children:w.compact([p?e(no,{mediaType:"tv",certification:p.rating},"ds-edb-episode-info-certification"):null,a?e(lo,{air_date:a},"ds-edb-episode-info-date"):null,o&&i?e(po,{name:s,season_number:o,episode_number:i},"ds-edb-episode-info-numbers"):null,n?e(io,{mediaType:"tv",runtime:n},"ds-edb-episode-info-runtime"):null])})},{getHue:mo}=ie,bo=re({type:"still",mode:"thumbnail"}),ho=re({type:"still",mode:"full"}),Z=({episode:d,onClick:r,...c})=>{const s=I(),{colorMode:t}=x(),{id:a,name:o,still_path:i}=d||{},n=C(we()),p=C(o?`${o} episode poster`:"Episode poster");return e(co,{...c,alt:p,onClick:r,src:{boring:Ie({id:a?String(a):n,colors:w.omit({...s.colors},["transparent","black","white"]),hue:mo({colorMode:t,type:"color"}),size:500,variant:xe({mediaType:"tv"})}),thumbnail:`https://image.tmdb.org/t/p/${bo}${i}`,full:`https://image.tmdb.org/t/p/${ho}${i}`}})},ee=w.memoize(({direction:d,seasons:r=[],episode:c})=>{const{season_number:s,episode_number:t}=c||{};if(s&&t){const a=r.find(({season_number:o})=>o===s);if(a)switch(d){case"prev":{const o=r.find(({season_number:n})=>n===s-1),i=r.findIndex(({season_number:n})=>n===s-1);return o&&o.episode_count&&i&&t===1?{season:i,episode:o.episode_count}:s>=1?{season:s,episode:t-1}:void 0}case"next":{const o=r.find(({season_number:n})=>n===s+1),i=r.findIndex(({season_number:n})=>n===s+1);return a.episode_count&&t<a.episode_count?{season:s,episode:t+1}:o&&o.episode_count&&i?{season:i,episode:1}:void 0}default:return}}}),oe=d=>{const r=I(),{colorMode:c}=x(),[s]=$(`(max-width: ${r.breakpoints.sm})`),{id:t}=z(),{name:a}=d,o=C({pathname:`/${N({mediaType:"tv"})}/${t}`,hash:"seasons"});return e(k,{colorMode:c,isFullWidth:!0,to:{...o},children:e(de,{colorMode:c,isFullWidth:!0,size:s?"md":"lg",variant:"outlined",children:`Go back to ${a||ne({type:"single",mediaType:"tv"})} seasons`})})},P=d=>{const r=I(),{colorMode:c}=x(),[s]=$(`(max-width: ${r.breakpoints.sm})`),[t]=$(`(max-width: ${r.breakpoints.md})`),{id:a}=z(),{type:o,season_number:i,episode_number:n}=d,p=C(`/${N({mediaType:"tv"})}/${a}/seasons/${i}/episodes/${n}`);return e(k,{colorMode:c,to:{pathname:p},isFullWidth:t,children:e(de,{colorMode:c,renderLeft:o==="prev"?()=>e(D,{icon:"arrow_back",category:"outlined"}):void 0,renderRight:o==="next"?()=>e(D,{icon:"arrow_forward",category:"outlined"}):void 0,isFullWidth:t,size:s?"md":"lg",variant:"outlined",children:[`S${i}`,`E${n}`].join(" • ")})})},fo=d=>{const r=I(),[c]=$(`(max-width: ${r.breakpoints.md})`),{spacing:s}=ce(),{showQuery:t,episodeQuery:a}=ue(),{data:o}=t||{},{name:i,seasons:n=[]}=o||{},{data:p}=a||{},V=ee({direction:"prev",seasons:n,episode:p}),u=M(V),f=ee({direction:"next",seasons:n,episode:p}),l=M(f);return c?E(le,{...d,width:"100%",spacing:s,children:[e(oe,{name:i}),E(K,{width:"100%",spacing:s,children:[u&&u.season&&u.episode&&e(P,{type:"prev",season_number:u.season,episode_number:u.episode}),l&&l.season&&l.episode&&e(P,{type:"next",season_number:l.season,episode_number:l.episode})]})]}):E(K,{...d,width:"100%",spacing:s,children:[u&&u.season&&u.episode&&e(P,{type:"prev",season_number:u.season,episode_number:u.episode}),e(oe,{name:i}),l&&l.season&&l.episode&&e(P,{type:"next",season_number:l.season,episode_number:l.episode})]})},go=h.lazy(()=>S(()=>import("./index-e01b1efb.js"),["assets/index-e01b1efb.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-f93cc2e8.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/dimensions-1922ff5f.js","assets/index-3c387dce.js","assets/index-c20f4d73.js","assets/index-6b3e9b0b.js","assets/index-5e29d59e.js","assets/index-a6d2ef26.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-278c1566.js","assets/index-6a4e7d59.js","assets/index-b0754bf1.js","assets/index-9f080699.js","assets/index-d275f317.js","assets/index-6fc29f67.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),vo=h.lazy(()=>S(()=>import("./index-bb799fb6.js"),["assets/index-bb799fb6.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-7571088f.js","assets/index-67fb8a4b.js","assets/index-6fc29f67.js","assets/index-566ac3e3.js","assets/index-8b729657.js","assets/index-6b3e9b0b.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/dimensions-1922ff5f.js","assets/index-5e29d59e.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),yo=h.lazy(()=>S(()=>import("./index-b23bf0a0.js"),["assets/index-b23bf0a0.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-7571088f.js","assets/index-67fb8a4b.js","assets/index-6fc29f67.js","assets/index-566ac3e3.js","assets/index-8b729657.js","assets/index-6b3e9b0b.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/dimensions-1922ff5f.js","assets/index-5e29d59e.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),_o=h.lazy(()=>S(()=>import("./index-dfb188bd.js"),["assets/index-dfb188bd.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-7571088f.js","assets/index-67fb8a4b.js","assets/index-6fc29f67.js","assets/index-566ac3e3.js","assets/index-8b729657.js","assets/index-6b3e9b0b.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/dimensions-1922ff5f.js","assets/index-5e29d59e.js","assets/index-a6d2ef26.js","assets/index-278c1566.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),To=h.lazy(()=>S(()=>import("./index-abe2d1d2.js"),["assets/index-abe2d1d2.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/index-278c1566.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-8b729657.js","assets/index-6b3e9b0b.js","assets/dimensions-1922ff5f.js","assets/index-5e29d59e.js","assets/index-a6d2ef26.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),Eo=h.lazy(()=>S(()=>import("./index-99d1d71c.js"),["assets/index-99d1d71c.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/index-566ac3e3.js","assets/index-8b729657.js","assets/index-5e29d59e.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-9f080699.js","assets/index-6b3e9b0b.js","assets/dimensions-1922ff5f.js","assets/index-a6d2ef26.js","assets/index-67fb8a4b.js","assets/index-278c1566.js","assets/index-86281d15.js","assets/index-21c2c4e5.js","assets/index-d96d68db.js","assets/formats-993363c7.js"])),O=h.createContext({onSetActiveTab:Se}),wo=()=>{const d=I(),{color:r,colorMode:c}=x(),[s]=$(`(max-width: ${d.breakpoints.sm})`),{isGuest:t,spacing:a}=ce(),{id:o,season:i,episode:n}=z(),p=Ve(),V=$e(),[u,f]=h.useState(0),l=M(u),me=Pe({props:{mediaType:"tv",id:Number(o)},config:{params:{append_to_response:"content_ratings"}}}),B=De({props:{id:Number(o),season:Number(i),episode:Number(n)}}),{data:g,isFetching:v,isLoading:y}=B,{name:R,vote_average:j,vote_count:be}=g||{},H=Ce({props:{id:Number(o),season:Number(i),episode:Number(n)},options:{enabled:!!o&&!!i&&!!n}}),{cast:he=[],guest_stars:fe=[],crew:ge=[]}=H.data||{},W=Le({props:{id:Number(o),season:Number(i),episode:Number(n)},options:{enabled:!!o&&!!i&&!!n}}),{stills:ve=[]}=W.data||{},F=Ae({props:{id:Number(o),season:Number(i),episode:Number(n)},options:{enabled:!!o&&!!i&&!!n}}),{results:ye=[]}=F.data||{},G=({index:b})=>{const m=A.find((_,_e)=>b===_e);m&&m.path&&V({...p,...m.path})},U=()=>{const b=p.hash.replaceAll("#",""),m=A.findIndex(({path:_})=>_.hash===b);f(m>=0?m:0)};return Me(()=>p.hash.length>0?U():void 0),te(()=>U(),[p.hash]),e(O.Provider,{value:{showQuery:me,episodeQuery:B,creditsQuery:H,imagesQuery:W,videosQuery:F,onSetActiveTab:G},children:E(Ze,{children:[e(eo,{renderLeftPanel:!s&&(v||y)?()=>e(J,{}):s?void 0:()=>e(Z,{episode:g}),renderTitle:b=>e(ke,{colorMode:c,isLoaded:!!R&&!(v||y),variant:"text",children:e(Q,{...b,children:R})}),renderSubtitle:v||y?()=>e(Oe,{}):g?()=>e(uo,{episode:g}):void 0,actions:v||y?e(ao,{}):j?e(ro,{rating:j,count:be}):void 0,direction:"row",spacing:a,p:a}),s&&(v||y)?e(J,{isFullWidth:!0,p:a}):s?e(Z,{episode:g,isFullWidth:!0,p:a}):null,!t&&(v||y)?e(Be,{p:a}):!t&&g?e(fo,{episode:g,p:a}):null,e(oo,{px:a,pb:a,children:e(Ne,{width:"100%",height:"100%",color:r,colorMode:c,activeTab:l,onChange:G,size:"xl",children:E(le,{width:"100%",height:"100%",spacing:a,children:[e(Qe,{tabs:A.map((b,m)=>({label:b.label,renderLeft:b.getIconProps?_=>b.getIconProps?e(to,{...b.getIconProps({..._,isActive:l===m})}):void 0:void 0,renderRight:b.getTotalBadgeProps?_=>b.getTotalBadgeProps?e(so,{...b.getTotalBadgeProps({..._,total:m===Re?he.length:m===je?fe.length:m===He?ge.length:m===We?ve.length:m===Fe?ye.length:0,isActive:l===m})}):void 0:void 0}))}),E(ze,{children:[e(T,{fallback:e(Ge,{}),children:e(go,{})}),e(T,{fallback:e(Ue,{}),children:e(vo,{})}),e(T,{fallback:e(qe,{}),children:e(_o,{})}),e(T,{fallback:e(Ke,{}),children:e(yo,{})}),e(T,{fallback:e(Je,{}),children:e(To,{})}),e(T,{fallback:e(Xe,{}),children:e(Eo,{})})]})]})})})]})})},Mo=Object.freeze(Object.defineProperty({__proto__:null,EpisodeContext:O,default:wo},Symbol.toStringTag,{value:"Module"}));export{ee as g,Mo as i,ue as u};
