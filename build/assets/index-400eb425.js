import{a8 as P,E as e,dF as X,aQ as Y,ai as w,ao as b,b7 as H,c5 as z,bP as x,av as Z,ah as S,bM as g,bN as ee,x as u,a6 as I,dU as te,dH as R,a7 as U,aL as k,dE as ae,dI as oe,dJ as se,ae as ne,aR as $,dC as ie,a9 as re,af as le,dK as ce,aa as de,c9 as pe,U as me,b6 as ue,ap as he,dL as ge,dP as be,aq as ye,ar as Te,N as D,ag as fe,T as ve,V as Pe,aH as Ie,K as _e,aV as L,bd as De,cj as Le}from"./useUserTheme-cad0e91d.js";import{C as Ce,a as we,t as C,m as Se,p as $e,b as Ve,c as Ae,d as Ee}from"./index-059dc8bd.js";import{b as j,c as Me,V as F}from"./index-da6fdb45.js";import{P as xe,a as ke,b as Fe}from"./index-f91c493c.js";import{T as Be}from"./index-6fc29f67.js";import{T as Oe}from"./index-86281d15.js";import{g as He}from"./user-1d41ba74.js";import{V as ze}from"./index-490c57f0.js";import{V as Re}from"./index-d96d68db.js";import"./index-67fb8a4b.js";import"./index-566ac3e3.js";import"./index-278c1566.js";const Ue=({collection:t,...a})=>{const{colorMode:c}=P(),{name:i=""}=t;return e(ze,{...a,children:e(X,{renderAction:({iconType:l,iconCategory:o,isDisabled:d,isLiked:r,onClick:p})=>e(Y,{color:r?"red":"gray",colorMode:c,renderLeft:()=>e(w,{icon:l,category:o}),isDisabled:d||!t,isFullWidth:!0,onClick:h=>{h.preventDefault(),h.stopPropagation(),p()},size:"lg",variant:"outlined",children:r?`Dislike ${b({type:"single",mediaType:"collection"})}`:`Like ${b({type:"single",mediaType:"collection"})}`}),title:i,mediaType:"collection",mediaItem:t})})},je=({parts:t=[]})=>{const{colorMode:a}=P(),[c,i]=H();return e(z,{"aria-label":"Show full total (tooltip)",colorMode:a,isOpen:c,placement:"bottom-start",label:`Collection has a total of ${x(t.length).format({average:!0})} ${b({type:t.length===1?"single":"multiple",mediaType:"movie"})}`,shouldWrapChildren:!0,children:e(j,{renderIcon:l=>e(w,{...l,icon:Z({mediaType:"movie"}),category:"outlined"}),renderLabel:l=>e(S,{...l,children:x(t.length).format({average:!0})}),onMouseEnter:()=>i.on(),onMouseLeave:()=>i.off()})})},B=g({date:ee(new Date).toISOString(),section:"year"}),Qe=({first:t,last:a})=>{const{colorMode:c}=P(),[i,l]=u.useState([]),[o,d]=u.useState([]),[r,p]=H(),h=()=>{l(I.compact([t&&t.release_date?`First ${b({type:"single",mediaType:"movie"})} ${B<g({date:t.release_date,section:"year"})?"will be":"was"} released on ${g({date:t.release_date})}`:null,a&&a.release_date?`Last ${b({type:"single",mediaType:"movie"})} ${B<g({date:a.release_date,section:"year"})?"will be":"was"} released on ${g({date:a.release_date})}`:t&&t.release_date?"Present":null])),d(I.compact([g({date:t.release_date||"",section:"year"}),a&&a.release_date?g({date:a.release_date,section:"year"}):"Present"]))};return u.useEffect(()=>h(),[t,a]),e(z,{"aria-label":"Show full date (tooltip)",colorMode:c,isOpen:r,placement:"bottom-start",label:i.join(" â€¢ "),shouldWrapChildren:!0,children:e(j,{renderIcon:y=>e(w,{...y,icon:"schedule",category:"outlined"}),renderLabel:y=>e(S,{...y,children:o.join(" -> ")}),onMouseEnter:()=>p.on(),onMouseLeave:()=>p.off()})})},Ne=({collection:t})=>{const{parts:a=[]}=t,[c,i]=u.useState(),[l,o]=u.useState(),d=()=>{const{first:r,last:p}=te({parts:a});r&&i(r),p&&o(p)};return u.useEffect(()=>d(),[a]),e(Me,{children:I.compact([c?e(Qe,{first:c,last:l},"ds-edb-collection-info-dates"):null,a.length>0?e(je,{parts:a},"ds-edb-collection-info-total"):null])})},{getHue:We}=ne,Ge=R({type:"poster",mode:"thumbnail"}),Ke=R({type:"poster",mode:"full"}),O=({collection:t,onClick:a,...c})=>{const i=U(),{colorMode:l}=P(),{id:o,name:d,poster_path:r}=t||{},p=k(d?`${d} ${b({type:"single",mediaType:"collection"})} poster`:`${b({type:"single",mediaType:"collection"})} poster`),h=k(ae());return e(Re,{...c,alt:p,onClick:a,src:{boring:oe({id:o?String(o):h,colors:I.omit({...i.colors},["transparent","black","white"]),hue:We({colorMode:l,type:"color"}),size:500,variant:se({mediaType:"movie"})}),thumbnail:`https://image.tmdb.org/t/p/${Ge}${r}`,full:`https://image.tmdb.org/t/p/${Ke}${r}`}})},qe=u.lazy(()=>$(()=>import("./index-90f79f10.js"),["assets/index-90f79f10.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useCollectionContext-04794e6c.js","assets/index-f93cc2e8.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-059dc8bd.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/index-6a4e7d59.js","assets/index-3c387dce.js","assets/index-c20f4d73.js","assets/index-6fc29f67.js","assets/index-86281d15.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Je=u.lazy(()=>$(()=>import("./index-cd81d9dd.js"),["assets/index-cd81d9dd.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-7571088f.js","assets/index-67fb8a4b.js","assets/index-6fc29f67.js","assets/index-566ac3e3.js","assets/useCollectionContext-04794e6c.js","assets/index-059dc8bd.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/index-86281d15.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Xe=u.lazy(()=>$(()=>import("./index-b98d3423.js"),["assets/index-b98d3423.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useCollectionContext-04794e6c.js","assets/index-e16e8c9e.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-278c1566.js","assets/index-059dc8bd.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-490c57f0.js","assets/index-86281d15.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Ye=u.createContext({onSetActiveTab:ie}),pt=()=>{const t=U(),{color:a,colorMode:c}=P(),[i]=re(`(max-width: ${t.breakpoints.sm})`),{isGuest:l,spacing:o}=le(),{id:d}=ce(),r=de(),p=pe(),h=me(),{id:y,recentlyViewed:Q}=ue(s=>s.users.data.activeUser.data),[N,W]=u.useState(0),_=he(N),V=ge({props:{mediaType:"collection",id:Number(d)},options:{onSuccess:s=>{y!==De.data.id&&h(Le({id:y,data:He({recentlyViewed:Q,mediaType:"collection",mediaItem:s})}))}}}),{data:n,isFetching:f,isLoading:v}=V,{parts:G=[]}=n||{},A=be({props:{mediaType:"collection",id:Number(d)},options:{enabled:!!(n!=null&&n.id)}}),{posters:K=[],backdrops:q=[]}=A.data||{},E=({index:s})=>{const m=C.find((T,J)=>s===J);m&&m.path&&p({...r,...m.path})},M=()=>{const s=r.hash.replaceAll("#",""),m=C.findIndex(({path:T})=>T.hash===s);W(m>=0?m:0)};return ye(()=>r.hash.length>0?M():void 0),Te(()=>M(),[r.hash]),e(Ye.Provider,{value:{collectionQuery:V,imagesQuery:A,onSetActiveTab:E},children:D(xe,{children:[e(ke,{renderLeftPanel:!i&&(f||v)?()=>e(F,{}):i?void 0:()=>e(O,{collection:n}),renderTitle:s=>e(fe,{colorMode:c,isLoaded:!!(n!=null&&n.name)&&!(f||v),variant:"text",children:e(S,{...s,children:n==null?void 0:n.name})}),renderSubtitle:f||v?()=>e(Ce,{}):n?()=>e(Ne,{collection:n}):void 0,direction:"row",spacing:o,p:o}),i&&(f||v)?e(F,{isFullWidth:!0,p:o}):i?e(O,{collection:n,isFullWidth:!0,p:o}):null,!l&&(f||v)?e(we,{p:o}):!l&&n?e(Ue,{collection:n,p:o}):null,e(Fe,{px:o,pb:o,children:e(ve,{width:"100%",height:"100%",color:a,colorMode:c,activeTab:_,onChange:E,size:"xl",children:D(Pe,{width:"100%",height:"100%",spacing:o,children:[e(Ie,{tabs:C.map((s,m)=>({label:s.label,renderLeft:s.getIconProps?T=>s.getIconProps?e(Oe,{...s.getIconProps({...T,isActive:_===m})}):void 0:void 0,renderRight:s.getTotalBadgeProps?T=>s.getTotalBadgeProps?e(Be,{...s.getTotalBadgeProps({...T,total:m===Se?G.length:m===$e?K.length+q.length:0,isActive:_===m})}):void 0:void 0}))}),D(_e,{children:[e(L,{fallback:e(Ve,{}),children:e(qe,{})}),e(L,{fallback:e(Ae,{}),children:e(Je,{})}),e(L,{fallback:e(Ee,{}),children:e(Xe,{})})]})]})})})]})})};export{Ye as CollectionContext,pt as default};
