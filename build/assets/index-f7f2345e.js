import{a8 as C,b6 as x,b7 as G,N as E,E as e,dF as le,aQ as U,ai as R,ao as I,ea as ce,c5 as pe,a6 as V,bP as F,ah as K,x as p,ar as q,dH as J,a7 as X,aL as j,dE as ue,dI as me,dJ as ge,ae as be,aR as D,dC as he,a9 as ve,af as ye,dK as Te,aa as fe,c9 as _e,U as we,ap as Ie,dL as Ve,eb as De,dO as Pe,dP as Le,ec as Me,ed as Ee,aq as Ce,bN as A,ag as Ae,T as ke,V as xe,aH as Re,K as Se,aV as w,bd as $e,cj as Qe}from"./useUserTheme-cad0e91d.js";import{b as ze,c as Oe,V as Be}from"./index-da6fdb45.js";import{P as Ne,a as He,b as Ue}from"./index-f91c493c.js";import{V as Fe}from"./index-65752566.js";import{V as je,a as We}from"./index-cc453732.js";import{T as Ge}from"./index-6fc29f67.js";import{V as Ke,a as qe,b as Je}from"./index-21c2c4e5.js";import{V as Xe}from"./index-5e29d59e.js";import{V as Ye,a as Ze,b as ea}from"./index-43080e55.js";import{M as aa,a as ta,t as k,g as sa,h as oa,r as ia,p as ra,v as na,D as da,b as la,c as ca,d as pa,e as ua,f as ma}from"./tabs-8cea7072.js";import{g as ga}from"./user-1d41ba74.js";import{V as ba}from"./index-490c57f0.js";import{V as ha}from"./index-d96d68db.js";import"./formats-993363c7.js";import"./index-c7b185ee.js";import"./dimensions-1922ff5f.js";import"./index-566ac3e3.js";import"./index-6c03e0d3.js";import"./index-67fb8a4b.js";import"./index-278c1566.js";const va=({movie:d,...u})=>{const{color:m,colorMode:r}=C(),{mediaItem:l,isOpen:t}=x(g=>g.modals.ui.bookmarkModal),{id:n,title:c=""}=d,[v,y]=G();return E(ba,{...u,children:[e(le,{renderAction:({iconType:g,iconCategory:i,isDisabled:b,isLiked:f,onClick:_})=>e(U,{color:f?"red":"gray",colorMode:r,renderLeft:()=>e(R,{icon:g,category:i}),isDisabled:b||!d,isFullWidth:!0,onClick:h=>{h.preventDefault(),h.stopPropagation(),_()},size:"lg",variant:"outlined",children:f?`Dislike ${I({type:"single",mediaType:"movie"})}`:`Like ${I({type:"single",mediaType:"movie"})}`}),title:c,mediaType:"movie",mediaItem:d}),e(ce,{renderAction:({iconType:g,iconCategory:i,isDisabled:b,isBookmarked:f,isBookmarkedMultiple:_,onClick:h})=>e(U,{color:t&&(l==null?void 0:l.id)===n||f||_?m:"gray",colorMode:r,renderLeft:()=>e(R,{icon:g,category:i}),isDisabled:b,isFullWidth:!0,onClick:P=>{P.preventDefault(),P.stopPropagation(),h()},onMouseEnter:()=>y.on(),onMouseLeave:()=>y.off(),size:"lg",variant:"outlined",children:f?`Remove ${I({type:"single",mediaType:"movie"})} from ${_?"lists":"list"}`:`Add ${I({type:"single",mediaType:"movie"})} to a list`}),title:c,mediaType:"movie",mediaItem:d,isHovering:v})]})},W=({type:d,cash:u})=>{const{colorMode:m}=C(),[r,l]=G();return e(pe,{"aria-label":`Show full ${d} (tooltip)`,colorMode:m,isOpen:r,placement:"bottom-start",label:`${V.capitalize(d)}: ${F(u).formatCurrency({thousandSeparated:!0})}`,shouldWrapChildren:!0,children:e(ze,{renderIcon:t=>e(R,{...t,icon:d==="budget"?"savings":"paid",category:"outlined"}),renderLabel:t=>e(K,{...t,textTransform:"uppercase",children:F(u).format({totalLength:3,average:!0})}),onMouseEnter:()=>l.on(),onMouseLeave:()=>l.off()})})},ya=({movie:d})=>{const{popularity:u,release_date:m,release_dates:r,runtime:l,budget:t,revenue:n,spoken_languages:c=[]}=d,[v,y]=p.useState(),g=p.useCallback(V.debounce(()=>{const i=((r==null?void 0:r.results)||[]).find(({iso_3166_1:b})=>b==="US");if(i&&(i!=null&&i.release_dates)&&(i!=null&&i.release_dates[0]))return y(i==null?void 0:i.release_dates[0])},250),[r]);return q(()=>g(),[r]),e(Oe,{children:V.compact([v?p.createElement(Ke,{...v,key:"ds-edb-movie-info-certification",mediaType:"movie"}):null,u?e(je,{popularity:u},"ds-edb-movie-info-popularity"):null,m?e(Ye,{mediaType:"movie",startDate:m},"ds-edb-movie-info-date"):null,l?e(qe,{mediaType:"movie",runtime:l},"ds-edb-movie-info-runtime"):null,t?e(W,{type:"budget",cash:t},"ds-edb-movie-info-cash-budget"):null,n?e(W,{type:"revenue",cash:n},"ds-edb-movie-info-cash-revenue"):null,c.length>0?e(Ze,{languages:c},"ds-edb-movie-info-languages"):null])})},{getHue:Ta}=be,fa=J({type:"poster",mode:"thumbnail"}),_a=J({type:"poster",mode:"full"}),wa=({movie:d,onClick:u,...m})=>{const r=X(),{colorMode:l}=C(),{id:t,title:n,poster_path:c}=d||{},v=j(n?`${n} ${I({type:"single",mediaType:"movie"})} poster`:`${I({type:"single",mediaType:"movie"})} poster`),y=j(ue());return e(ha,{...m,alt:v,onClick:u,src:{boring:me({id:t?String(t):y,colors:V.omit({...r.colors},["transparent","black","white"]),hue:Ta({colorMode:l,type:"color"}),size:500,variant:ge({mediaType:"movie"})}),thumbnail:`https://image.tmdb.org/t/p/${fa}${c}`,full:`https://image.tmdb.org/t/p/${_a}${c}`}})},Ia=p.lazy(()=>D(()=>import("./index-7790ec21.js"),["assets/index-7790ec21.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useMovieContext-b3bd3057.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-5e29d59e.js","assets/index-98cf844d.js","assets/index-3c387dce.js","assets/index-c20f4d73.js","assets/tabs-8cea7072.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/index-65752566.js","assets/index-6409f3e0.js","assets/index-6a4e7d59.js","assets/index-b0754bf1.js","assets/index-9f080699.js","assets/index-6fc29f67.js","assets/index-88486953.js","assets/index-f93cc2e8.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Va=p.lazy(()=>D(()=>import("./index-614102da.js"),["assets/index-614102da.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useMovieContext-b3bd3057.js","assets/index-7571088f.js","assets/index-6fc29f67.js","assets/index-233a8912.js","assets/index-67fb8a4b.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/tabs-8cea7072.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Da=p.lazy(()=>D(()=>import("./index-5b500d72.js"),["assets/index-5b500d72.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useMovieContext-b3bd3057.js","assets/index-7571088f.js","assets/index-6fc29f67.js","assets/index-82200d96.js","assets/index-566ac3e3.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/tabs-8cea7072.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Pa=p.lazy(()=>D(()=>import("./index-17d969a7.js"),["assets/index-17d969a7.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/useMovieContext-b3bd3057.js","assets/index-6fc29f67.js","assets/index-76bf374f.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-5e29d59e.js","assets/index-88486953.js","assets/index-f93cc2e8.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/tabs-8cea7072.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),La=p.lazy(()=>D(()=>import("./index-b4249183.js"),["assets/index-b4249183.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useMovieContext-b3bd3057.js","assets/index-e16e8c9e.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-278c1566.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-5e29d59e.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/tabs-8cea7072.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-566ac3e3.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-490c57f0.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Ma=p.lazy(()=>D(()=>import("./index-8d582c6a.js"),["assets/index-8d582c6a.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/useMovieContext-b3bd3057.js","assets/index-85a5a262.js","assets/index-566ac3e3.js","assets/index-5e29d59e.js","assets/index-f91c493c.js","assets/index-da6fdb45.js","assets/index-9f080699.js","assets/index-65752566.js","assets/index-cc453732.js","assets/index-21c2c4e5.js","assets/index-43080e55.js","assets/formats-993363c7.js","assets/tabs-8cea7072.js","assets/index-c7b185ee.js","assets/dimensions-1922ff5f.js","assets/index-6c03e0d3.js","assets/index-67fb8a4b.js","assets/index-490c57f0.js","assets/index-278c1566.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),Ea=p.createContext({onSetActiveTab:he}),Ja=()=>{const d=X(),{color:u,colorMode:m}=C(),[r]=ve(`(max-width: ${d.breakpoints.sm})`),{isGuest:l,spacing:t}=ye(),{id:n}=Te(),c=fe(),v=_e(),y=we(),{id:g,recentlyViewed:i}=x(s=>s.users.data.activeUser.data),b=x(s=>{var o;return((o=s.users.data.activeUser.data.reviews.user.movie.find(({mediaItem:T})=>(T==null?void 0:T.id)===n))==null?void 0:o.reviews.length)||0}),[f,_]=p.useState(0),h=Ie(f),P=Ve({props:{mediaType:"movie",id:Number(n)},config:{params:{append_to_response:"release_dates"}},options:{onSuccess:s=>{g!==$e.data.id&&y(Qe({id:g,data:ga({recentlyViewed:i,mediaType:"movie",mediaItem:s})}))}}}),{data:a,isFetching:L,isLoading:M}=P,S=De({props:{mediaType:"movie",id:Number(n)},options:{enabled:!!(a!=null&&a.id)}}),{data:Y}=S,{cast:Z=[],crew:ee=[]}=Y||{},{data:$,isFetching:ae,isLoading:te}=Pe({props:{mediaType:"movie",id:Number(n)},options:{enabled:!!(a!=null&&a.id)}}),Q=Le({props:{mediaType:"movie",id:Number(n)},options:{enabled:!!(a!=null&&a.id)}}),{posters:se=[],backdrops:oe=[]}=Q.data||{},z=Me({props:{mediaType:"movie",id:Number(n)},options:{enabled:!!(a!=null&&a.id)}}),{results:ie=[]}=z.data||{},O=Ee({props:{mediaType:"movie",id:Number(n)},options:{enabled:!!(a!=null&&a.id)}}),{pages:B=[]}=O.data||{},[re,ne]=p.useState(b),N=({index:s})=>{const o=k.find((T,de)=>s===de);o&&o.path&&v({...c,...o.path})},H=()=>{const s=c.hash.replaceAll("#",""),o=k.findIndex(({path:T})=>T.hash===s);_(o>=0?o:0)};return Ce(()=>c.hash.length>0?H():void 0),q(()=>H(),[c.hash]),p.useEffect(()=>{ne(b+B.reduce((s,{results:o=[]})=>s+o.length,0))},[b,B]),e(Ea.Provider,{value:{movieQuery:P,creditsQuery:S,reviewsQuery:O,imagesQuery:Q,videosQuery:z,onSetActiveTab:N},children:E(Ne,{children:[a&&a.title&&a.release_date&&A(A(a.release_date)).isAfter(A(new Date))&&e(ea,{mediaType:"movie",title:a.title,date:a.release_date}),e(He,{renderLeftPanel:h!==0&&(L||M)?()=>e(Be,{}):h!==0?()=>e(wa,{movie:a}):void 0,renderTitle:s=>e(Ae,{colorMode:m,isLoaded:!!(a!=null&&a.title)&&!(L||M),variant:"text",children:e(K,{...s,children:a==null?void 0:a.title})}),renderSubtitle:L||M?()=>e(aa,{}):a?()=>e(ya,{movie:a}):void 0,actions:L||M?e(Xe,{}):a&&a.vote_average?e(Je,{rating:a.vote_average,count:a.vote_count}):void 0,direction:"row",spacing:t,p:t}),!l&&(L||M)?e(ta,{p:t}):!l&&a?e(va,{movie:a,p:t}):null,e(Ue,{px:t,pb:t,children:e(ke,{width:"100%",height:"100%",color:u,colorMode:m,activeTab:h,onChange:N,size:"xl",children:E(xe,{width:"100%",height:"100%",spacing:t,children:[e(Re,{tabs:k.map((s,o)=>({label:s.label,renderRight:s.getTotalBadgeProps?T=>s.getTotalBadgeProps?e(Ge,{...s.getTotalBadgeProps({...T,total:o===sa?Z.length:o===oa?ee.length:o===ia?re:o===ra?se.length+oe.length:o===na?ie.length:0,isActive:h===o})}):void 0:void 0})),renderRight:!r&&(ae||te)?()=>e(Fe,{}):!r&&V.keys(V.pick($,["facebook_id","twitter_id","instagram_id","imdb_id"])).length>0?()=>e(We,{socials:{...$,homepage_id:a==null?void 0:a.homepage}}):void 0}),E(Se,{children:[e(w,{fallback:e(da,{}),children:e(Ia,{})}),e(w,{fallback:e(la,{}),children:e(Va,{})}),e(w,{fallback:e(ca,{}),children:e(Da,{})}),e(w,{fallback:e(pa,{}),children:e(Pa,{})}),e(w,{fallback:e(ua,{}),children:e(La,{})}),e(w,{fallback:e(ma,{}),children:e(Ma,{})})]})]})})})]})})};export{Ea as MovieContext,Ja as default};
