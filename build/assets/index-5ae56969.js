import{a7 as $,a8 as f,a9 as H,af as B,b6 as g,cx as j,N as h,V as M,E as e,as as R,M as E,eo as Q,ah as S,ao as y,a6 as q,b_ as X,b$ as I,c0 as J,ep as K,aP as w,aQ as u,bP as Y,c9 as Z,U as D,ai as m,ba as L,b9 as ee,bc as oe,bd as C,ax as te,x as W,L as re,e0 as ie,ae as _,aa as G,el as ae,eq as ne,c8 as se,ar as T,er as le,es as ce,et as de,eu as pe,ev as he}from"./useUserTheme-cad0e91d.js";import{d as v}from"./dimensions-1922ff5f.js";import{H as ue,a as me,b as xe,c as ge}from"./index-3c387dce.js";const Ce=()=>{const c=$(),{color:s,colorMode:r}=f(),[p]=H(`(max-width: ${c.breakpoints.sm})`),{spacing:t}=B(),l=g(o=>j([...o.users.data.activeUser.data.recentlyViewed.movie,...o.users.data.activeUser.data.recentlyViewed.tv,...o.users.data.activeUser.data.recentlyViewed.person,...o.users.data.activeUser.data.recentlyViewed.collection]).desc(({addedAt:a})=>a));return l.length>0?h(M,{width:"100%",spacing:0,mt:t,children:[e(R,{colorMode:r}),e(E,{width:"100%",p:t,children:h(Q,{colorMode:r,isFullWidth:!0,spacing:2,p:2,children:[e(ue,{renderTitle:o=>e(S,{...o,children:"Recently Viewed"}),renderSubtitle:o=>e(S,{...o,children:`This list is showcasing the most recently viewed ${y({type:"multiple",mediaType:"movie"})}, ${y({type:"multiple",mediaType:"tv"})}, ${y({type:"multiple",mediaType:"person"})} & ${y({type:"multiple",mediaType:"collection"})}`}),arrowProps:{variant:"icon"},spacing:0}),e(me,{children:e(xe,{children:q.compact(l.filter((o,a)=>a<20).map(({mediaType:o,mediaItem:a})=>o==="movie"?e(X,{movie:a,sx:v},a.id):o==="tv"?e(I,{show:a,sx:v},a.id):o==="person"?e(J,{person:a,sx:v},a.id):o==="collection"?e(K,{collection:a,sx:v},a.id):null))})}),e(ge,{children:e(w,{to:"/recently-viewed",isFullWidth:!0,children:e(u,{color:s,colorMode:r,isFullWidth:!0,size:p?"xs":"sm",variant:"text",children:`View all ${Y(l.length).format({average:!0})} Recently Viewed`})})})]})})]}):null},x={px:"0 !important","*":{justifyContent:"flex-start !important"}},fe=()=>{const{colorMode:c}=f(),s=Z(),r=D(),p=g(l=>l.users.data.activeUser),t=()=>{r(L(!0)),ee({color:p.ui.theme.color,colorMode:c}),setTimeout(()=>r(oe({...C,ui:{...C.ui,theme:{...C.ui.theme,color:p.ui.theme.color}}})),250),setTimeout(()=>s("/authentication/signin"),500),setTimeout(()=>r(L(!1)),2500)};return e(u,{color:"red",colorMode:c,renderLeft:({colorMode:l,height:o})=>e(m,{colorMode:l,width:`${o}px`,height:`${o}px`,fontSize:`${o}px`,icon:"logout",category:"outlined"}),isFullWidth:!0,onClick:()=>t(),size:"lg",variant:"text",sx:{...x},children:"Sign out"})},{convertREMToPixels:ye,convertStringToNumber:ve,getColor:F}=_,P=2,be=()=>{const c=$(),{colorMode:s}=f(),{info:{name:r,avatar_path:p},credentials:{username:t}}=g(n=>n.users.data.activeUser.data),[l,{width:o}]=te(),a=W.useCallback(()=>{const n=ye(ve(c.space[P],"rem"));return`calc(100% - ${o+n}px)`},[c,P,o]);return h(re,{width:"100%",spacing:P,children:[e(E,{ref:l,children:e(ie,{alt:r,borderRadius:"base",src:{full:p},size:c.fontSizes["7xl"]})}),h(M,{width:a(),alignItems:"flex-start",spacing:.5,children:[e(S,{align:"left",color:F({theme:c,colorMode:s,type:"text.primary"}),fontSize:"2xl",fontWeight:"bold",lineHeight:"normal",noOfLines:1,children:r}),e(S,{align:"left",color:F({theme:c,colorMode:s,type:"text.secondary"}),fontSize:"md",lineHeight:"normal",noOfLines:1,children:`@${t}`})]})]})},we=()=>{const c=$(),{color:s,colorMode:r}=f(),[p]=H(`(min-width: ${c.breakpoints.xl})`),t=G(),l=D(),o=g(n=>n.modals.ui.isInternationalizationModalOpen),a=g(n=>n.modals.ui.isUserThemeModalOpen);return h(M,{width:"100%",spacing:0,children:[e(w,{to:"/profile",isDisabled:t.pathname==="/profile"&&t.hash.length===0,isFullWidth:!0,children:e(u,{color:t.pathname==="/profile"&&t.hash.length===0?s:"gray",colorMode:r,renderLeft:({color:n,colorMode:d,height:i})=>e(m,{colorMode:d,width:`${i}px`,height:`${i}px`,fontSize:`${i}px`,icon:"person",category:t.pathname==="/profile"&&t.hash.length===0?"filled":"outlined",skeletonColor:n}),isFullWidth:!0,size:"lg",variant:"text",sx:{...x},children:"Profile"})}),e(w,{to:{pathname:"/profile",hash:"mylikes"},isDisabled:t.pathname==="/profile"&&t.hash==="#mylikes",isFullWidth:!0,children:e(u,{color:t.pathname==="/profile"&&t.hash==="#mylikes"?s:"gray",colorMode:r,renderLeft:({color:n,colorMode:d,height:i})=>e(m,{colorMode:d,width:`${i}px`,height:`${i}px`,fontSize:`${i}px`,icon:t.pathname==="/profile"&&t.hash==="#mylikes"?"favorite":"favorite_border",category:"outlined",skeletonColor:n}),isFullWidth:!0,size:"lg",variant:"text",sx:{...x},children:"Liked"})}),e(w,{to:{pathname:"/profile",hash:"mylists"},isDisabled:t.pathname==="/profile"&&t.hash==="#mylists",isFullWidth:!0,children:e(u,{color:t.pathname==="/profile"&&t.hash==="#mylists"?s:"gray",colorMode:r,renderLeft:({color:n,colorMode:d,height:i})=>e(m,{colorMode:d,width:`${i}px`,height:`${i}px`,fontSize:`${i}px`,icon:t.pathname==="/profile"&&t.hash==="#mylists"?"bookmark":"bookmark_border",category:"outlined",skeletonColor:n}),isFullWidth:!0,size:"lg",variant:"text",sx:{...x},children:"Lists"})}),p&&e(u,{color:o?s:"gray",colorMode:r,renderLeft:({color:n,colorMode:d,height:i})=>e(m,{colorMode:d,width:`${i}px`,height:`${i}px`,fontSize:`${i}px`,icon:"language",category:o?"filled":"outlined",skeletonColor:n}),isFullWidth:!0,onClick:()=>l(ae(!0)),size:"lg",variant:"text",sx:{...x},children:"Language"}),e(u,{color:a?s:"gray",colorMode:r,renderLeft:({color:n,colorMode:d,height:i})=>e(m,{colorMode:d,width:`${i}px`,height:`${i}px`,fontSize:`${i}px`,icon:"palette",category:a?"filled":"outlined",skeletonColor:n}),isFullWidth:!0,onClick:()=>l(ne(!0)),size:"lg",variant:"text",sx:{...x},children:"Display"})]})},{convertREMToPixels:Se,convertStringToNumber:$e,getColor:b}=_,Te=c=>{const s=$(),{colorMode:r}=f(),p=G(),{isOpen:t=!1,onOpen:l,onClose:o,renderAction:a,placement:n="bottom-end",gutter:d=8,...i}=c,{isOpen:O,onOpen:U,onClose:k}=se(),[V,N]=W.useState(b({theme:s,colorMode:r,type:"background"})),[z,A]=W.useState(b({theme:s,colorMode:r,type:"divider"}));return T(()=>N(b({theme:s,colorMode:r,type:"background"})),[r]),T(()=>A(b({theme:s,colorMode:r,type:"divider"})),[r]),T(()=>o?o():k(),[p.pathname]),h(le,{...i,arrowSize:Se($e(s.space[1.5],"rem")),arrowShadowColor:z,isOpen:t||O,placement:n,gutter:d,onOpen:()=>l?l():U(),onClose:()=>o?o():k(),children:[e(ce,{children:a({isOpen:t||O,onOpen:U,onClose:o||k})}),e(de,{children:h(pe,{width:"auto",minWidth:"275px",maxWidth:"350px",borderRadius:"lg",borderWidth:"2px",borderStyle:"solid",borderColor:z,boxShadow:"none",_focus:{boxShadow:"none"},children:[e(he,{background:`${V} !important`,borderWidth:"2px",borderStyle:"solid",borderColor:z,boxShadow:"none !important"}),h(M,{width:"100%",background:V,borderRadius:"inherit",divider:e(R,{colorMode:r}),spacing:2,p:2,children:[e(be,{}),e(we,{}),e(fe,{})]})]})})]})};export{Ce as R,Te as U};
