import{a8 as M,af as C,N as w,bI as te,E as e,bO as se,ah as Q,J as re,bz as ae,a7 as H,a9 as P,b6 as ie,aQ as j,ai as I,a6 as f,cx as J,ae as X,x as L,ap as oe,bS as z,bT as k,bU as le,bV as F,bW as W,bX as N,bY as O,ao as U,aD as ne,aE as de,bZ as ce,V,M as q,as as he}from"./useUserTheme-cad0e91d.js";import{h as Y}from"./index-c7b185ee.js";import{c as ue,b as pe,V as me,a as ye}from"./index-88486953.js";import{T as ge}from"./index-6fc29f67.js";import{V as S}from"./index-566ac3e3.js";import{L as A}from"./index-67fb8a4b.js";const Z=y=>{const{color:i,colorMode:h}=M(),{spacing:o}=C(),{children:u,renderFooter:c,title:n,subtitle:p,total:v=0,hasHeader:d=!0}=y;return w(te,{colorMode:h,isFullWidth:!0,spacing:o,p:o,variant:"transparent",children:[d&&e(se,{renderTitle:t=>e(Q,{...t,fontSize:"2xl",children:n}),renderSubtitle:p?t=>e(Q,{...t,children:n}):void 0,actions:e(ge,{color:i,colorMode:h,total:v})}),e(re,{children:u}),c&&e(ae,{children:c()})]})},{getColor:we}=X,ve=y=>{const i=H(),{color:h,colorMode:o}=M(),[u]=P(`(max-width: ${i.breakpoints.sm})`),{mediaType:c,mediaItem:n,name:p}=y,{id:v}=n,d=ie(t=>{var r,m;switch(c){case"movie":return(r=t.users.data.activeUser.data.reviews.user.movie.find(({mediaItem:l})=>(l==null?void 0:l.id)===v))==null?void 0:r.reviews;case"tv":return(m=t.users.data.activeUser.data.reviews.user.tv.find(({mediaItem:l})=>(l==null?void 0:l.id)===v))==null?void 0:m.reviews}})||[];return e(Z,{title:"My Reviews",total:d.length,renderFooter:d.length>0?()=>e(ue,{mediaType:c,mediaItem:n,renderButton:({icon:t,category:r,...m})=>e(j,{...m,color:h,colorMode:o,isFullWidth:!0,renderLeft:({color:l,colorMode:x,height:b})=>e(I,{width:`${b}px`,height:`${b}px`,fontSize:`${b}px`,colorMode:x,icon:t,category:r,skeletonColor:l}),size:u?"xs":"sm",variant:"text",children:"Create a new Review"})}):void 0,children:d.length===0?e(pe,{mediaType:c,mediaItem:n,name:p,borderWidth:"2px",borderStyle:"dashed",borderColor:we({theme:i,colorMode:o,type:"divider"}),borderRadius:"lg"}):d.length>0?e(S,{displayMode:"list",children:()=>f.compact(J([...d]).desc(({updatedAt:t,createdAt:r})=>t||r).map((t,r)=>t.content?e(me,{mediaType:c,mediaItem:n,review:t},r):null))}):e(S,{displayMode:"list",children:()=>f.range(2).map((t,r)=>e(Y,{},r))})})},{getColor:G}=X,be=y=>{var _,$,B;const i=H(),{color:h,colorMode:o}=M(),[u]=P(`(max-width: ${i.breakpoints.sm})`),{isGuest:c,spacing:n}=C(),{mediaType:p,query:v,name:d}=y,{data:t,isFetchingNextPage:r,isFetching:m,isLoading:l,isError:x,isSuccess:b,hasNextPage:E,error:R,refetch:T,fetchNextPage:D}=v,[K,ee]=L.useState(),s=oe(K,"slow");return L.useEffect(()=>{if(t&&t.pages&&t.pages.length>0){let a=[];t.pages.forEach(g=>{a=[...a,...(g==null?void 0:g.results)||[]]}),ee({page:t.pages[t.pages.length-1].page||1,results:f.uniqBy([...a],"id"),total_pages:t.pages[t.pages.length-1].total_pages,total_results:t.pages[t.pages.length-1].total_results})}},[t]),e(Z,{title:"Other Reviews",total:(_=s==null?void 0:s.results)==null?void 0:_.length,hasHeader:!c,children:!(r||m||l)&&x?e(z,{color:h,colorMode:o,borderWidth:"2px",borderStyle:"dashed",borderColor:G({theme:i,colorMode:o,type:"divider"}),borderRadius:"lg",children:w(k,{children:[e(le,{renderIcon:a=>e(I,{...a,width:i.fontSizes["6xl"],height:i.fontSizes["6xl"],fontSize:i.fontSizes["6xl"],icon:"error_outline"}),p:2}),w(F,{children:[e(W,{}),e(N,{children:O({type:"error",label:d?`"${d}" Reviews`:`${U({type:"single",mediaType:p})} Reviews`})})]}),R&&(($=R.response)==null?void 0:$.data)&&R.response.data.status_code&&R.response.data.status_message&&e(ne,{color:h,colorMode:o,children:e(de,{children:`(${R.response.data.status_code}) ${R.response.data.status_message}`})}),T&&e(ce,{renderActions:a=>e(j,{...a,onClick:T,children:"Try Again"})})]})}):!(r||m||l)&&b&&s&&s.results&&s.results.length===0?e(z,{color:h,colorMode:o,borderWidth:"2px",borderStyle:"dashed",borderColor:G({theme:i,colorMode:o,type:"divider"}),borderRadius:"lg",children:e(k,{children:w(F,{children:[e(W,{}),e(N,{children:O({type:"empty",label:d?`"${d}" Reviews`:`${U({type:"single",mediaType:p})} Reviews`})})]})})}):!(r||m||l)&&b&&s&&s.results&&s.results.length>0?w(V,{width:"100%",spacing:n,children:[e(S,{displayMode:"list",children:()=>f.compact(J(s.results||[]).desc(({updated_at:a,created_at:g})=>a||g).map(a=>a.content?e(ye,{review:a},a.id):null))}),e(q,{width:u?"100%":"auto",children:e(A,{amount:s.results.length||0,total:s.total_results||0,label:"Reviews",isLoading:!1,isButtonVisible:E&&!x,onClick:D})})]}):w(V,{width:"100%",spacing:n,children:[e(S,{displayMode:"list",children:()=>f.range(5).map((a,g)=>e(Y,{},g))}),e(q,{width:u?"100%":"auto",children:e(A,{amount:((B=s==null?void 0:s.results)==null?void 0:B.length)||0,total:(s==null?void 0:s.total_results)||0,label:"Reviews",isDisabled:!0,isLoading:!0,isButtonVisible:E&&!x})})]})})},Ce=y=>{const{colorMode:i}=M(),{isGuest:h,spacing:o}=C(),{mediaType:u,mediaItem:c,query:n,name:p}=y;return w(V,{width:"100%",divider:e(he,{colorMode:i}),spacing:o,children:[!h&&e(ve,{mediaItem:c,mediaType:u,name:p}),e(be,{mediaType:u,query:n,name:p})]})};export{Ce as V};
