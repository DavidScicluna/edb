import{a8 as f,E as e,dF as le,aQ as pe,ai as _,ao as T,b7 as me,c5 as ue,dG as he,ah as C,a6 as h,bM as D,cx as ge,dH as K,a7 as G,aL as H,dE as be,dI as ye,dJ as ve,ae as Te,x as u,aR as V,dC as fe,a9 as De,af as Pe,dK as we,aa as Ie,c9 as Se,U as _e,b6 as Ce,ap as P,dL as Ve,dM as U,dN as j,dO as xe,dP as Le,aq as Ee,ar as ke,N as w,ag as Ae,T as Me,V as $e,aH as Be,K as Qe,aV as I,bd as Fe,cj as Ne}from"./useUserTheme-cad0e91d.js";import{P as Oe,a as Re,b as ze}from"./index-f91c493c.js";import{T as He}from"./index-6fc29f67.js";import{b as J,c as Ue,V as W}from"./index-da6fdb45.js";import{V as je,a as We}from"./index-cc453732.js";import{V as qe}from"./index-65752566.js";import{P as Ke,t as S,c as Ge,p as Je,D as Xe,a as Ye,b as Ze}from"./index-8754a0a6.js";import{g as et}from"./user-1d41ba74.js";import{V as tt}from"./index-490c57f0.js";import{V as at}from"./index-d96d68db.js";import"./dimensions-1922ff5f.js";import"./index-fac269b5.js";import"./index-86281d15.js";const st=({person:i,...c})=>{const{colorMode:n}=f(),{name:a=""}=i;return e(tt,{...c,children:e(le,{renderAction:({iconType:o,iconCategory:r,isDisabled:d,isLiked:p,onClick:g})=>e(pe,{color:p?"red":"gray",colorMode:n,renderLeft:()=>e(_,{icon:o,category:r}),isDisabled:d||!i,isFullWidth:!0,onClick:m=>{m.preventDefault(),m.stopPropagation(),g()},size:"lg",variant:"outlined",children:p?`Dislike ${T({type:"single",mediaType:"person"})}`:`Like ${T({type:"single",mediaType:"person"})}`}),title:a,mediaType:"person",mediaItem:i})})},ot=({birthday:i,deathday:c,place_of_birth:n})=>{const{colorMode:a}=f(),[o,r]=me();return e(ue,{"aria-label":"Show full birthday (tooltip)",colorMode:a,isOpen:o,placement:"bottom-start",label:he({birthday:i,deathday:c,place_of_birth:n}),shouldWrapChildren:!0,children:e(J,{renderIcon:d=>e(_,{...d,icon:"cake",category:"outlined"}),renderLabel:d=>e(C,{...d,children:c?h.compact([D({date:i,section:"year"}),D({date:c,section:"year"})]).join(" - "):D({date:i})}),onMouseEnter:()=>r.on(),onMouseLeave:()=>r.off()})})},it=({movieDepartments:i=[],tvShowDepartments:c=[]})=>e(J,{renderIcon:n=>e(_,{...n,icon:"work_outline",category:"outlined"}),renderLabel:n=>e(C,{...n,children:ge(h.uniq([...i.map(({label:a})=>a),...c.map(({label:a})=>a)])).asc().join(", ")})}),nt=({person:i,movieDepartments:c=[],tvShowDepartments:n=[]})=>{const{popularity:a,birthday:o,deathday:r,place_of_birth:d}=i;return e(Ue,{children:h.compact([a?e(je,{popularity:a},"ds-edb-person-info-popularity"):null,o?e(ot,{birthday:o,deathday:r,place_of_birth:d},"ds-edb-person-info-date"):null,c.length+n.length>0?e(it,{movieDepartments:c,tvShowDepartments:n},"ds-edb-person-info-departments"):null])})},{getHue:rt}=Te,dt=K({type:"profile",mode:"thumbnail"}),ct=K({type:"profile",mode:"full"}),q=({person:i,onClick:c,...n})=>{const a=G(),{colorMode:o}=f(),{id:r,name:d,profile_path:p}=i||{},g=H(d?`${d} ${T({type:"single",mediaType:"person"})} avatar`:`${T({type:"single",mediaType:"person"})} avatar`),m=H(be());return e(at,{...n,alt:g,onClick:c,src:{boring:ye({id:r?String(r):m,colors:h.omit({...a.colors},["transparent","black","white"]),hue:rt({colorMode:o,type:"color"}),size:500,variant:ve({mediaType:"person"})}),thumbnail:`https://image.tmdb.org/t/p/${dt}${p}`,full:`https://image.tmdb.org/t/p/${ct}${p}`}})},lt=u.lazy(()=>V(()=>import("./index-d2fb3dd6.js"),["assets/index-d2fb3dd6.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-f93cc2e8.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/usePersonContext-c044aaaa.js","assets/index-8754a0a6.js","assets/dimensions-1922ff5f.js","assets/index-490c57f0.js","assets/index-fac269b5.js","assets/index-86281d15.js","assets/index-65752566.js","assets/index-6a4e7d59.js","assets/index-3c387dce.js","assets/index-c20f4d73.js","assets/index-6409f3e0.js","assets/index-6fc29f67.js","assets/index-cc453732.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),pt=u.lazy(()=>V(()=>import("./index-f0b5e273.js"),["assets/index-f0b5e273.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/index-8754a0a6.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/dimensions-1922ff5f.js","assets/index-490c57f0.js","assets/index-fac269b5.js","assets/index-86281d15.js","assets/index-65752566.js","assets/usePersonContext-c044aaaa.js","assets/index-cc453732.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),mt=u.lazy(()=>V(()=>import("./index-75403524.js"),["assets/index-75403524.js","assets/useUserTheme-cad0e91d.js","assets/useUserTheme-5f2d009e.css","assets/index-6fc29f67.js","assets/usePersonContext-c044aaaa.js","assets/index-e16e8c9e.js","assets/index-da6fdb45.js","assets/index-f91c493c.js","assets/index-278c1566.js","assets/index-cc453732.js","assets/index-65752566.js","assets/index-8754a0a6.js","assets/dimensions-1922ff5f.js","assets/index-490c57f0.js","assets/index-fac269b5.js","assets/index-86281d15.js","assets/user-1d41ba74.js","assets/index-d96d68db.js"])),ut=u.createContext({onSetActiveTab:fe}),Ct=()=>{const i=G(),{color:c,colorMode:n}=f(),[a]=De(`(max-width: ${i.breakpoints.sm})`),{spacing:o}=Pe(),{id:r}=we(),d=Ie(),p=Se(),g=_e(),{id:m,recentlyViewed:X}=Ce(s=>s.users.data.activeUser.data),[Y,Z]=u.useState(0),x=P(Y),[ee,te]=u.useState([]),L=P(ee),[ae,se]=u.useState([]),E=P(ae),k=Ve({props:{mediaType:"person",id:Number(r)},options:{onSuccess:s=>{m!==Fe.data.id&&g(Ne({id:m,data:et({recentlyViewed:X,mediaType:"person",mediaItem:s})}))}}}),{data:t,isFetching:b,isLoading:y}=k,A=U({props:{mediaType:"movie",id:Number(r)},options:{enabled:!!(t!=null&&t.id),onSuccess:s=>{te([...j({credits:s})])}}}),{data:oe}=A,{cast:M=[],crew:$=[]}=oe||{},B=U({props:{mediaType:"tv",id:Number(r)},options:{enabled:!!(t!=null&&t.id),onSuccess:s=>{se([...j({credits:s})])}}}),{data:ie}=B,{cast:Q=[],crew:F=[]}=ie||{},{data:N,isFetching:ne,isLoading:re}=xe({props:{mediaType:"person",id:Number(r)},options:{enabled:!!(t!=null&&t.id)}}),O=Le({props:{mediaType:"person",id:Number(r)},options:{enabled:!!(t!=null&&t.id)}}),{profiles:de=[]}=O.data||{},R=({index:s})=>{const l=S.find((v,ce)=>s===ce);l&&l.path&&p({...d,...l.path})},z=()=>{const s=d.hash.replaceAll("#",""),l=S.findIndex(({path:v})=>v.hash===s);Z(l>=0?l:0)};return Ee(()=>d.hash.length>0?z():void 0),ke(()=>z(),[d.hash]),e(ut.Provider,{value:{personQuery:k,movieCreditsQuery:A,tvShowCreditsQuery:B,imagesQuery:O,onSetActiveTab:R},children:w(Oe,{children:[e(Re,{renderLeftPanel:!a&&(b||y)?()=>e(W,{}):a?void 0:()=>e(q,{person:t}),renderTitle:s=>e(Ae,{colorMode:n,isLoaded:!!(t!=null&&t.name)&&!(b||y),variant:"text",children:e(C,{...s,children:t==null?void 0:t.name})}),renderSubtitle:b||y?()=>e(Ke,{}):t?()=>e(nt,{person:t,movieDepartments:L,tvShowDepartments:E}):void 0,direction:"row",spacing:o,p:o}),a&&(b||y)?e(W,{isFullWidth:!0,p:o}):a?e(q,{person:t,isFullWidth:!0,p:o}):null,t?e(st,{person:t,p:o}):null,e(ze,{px:o,pb:o,children:e(Me,{width:"100%",color:c,colorMode:n,activeTab:x,onChange:R,size:"xl",children:w($e,{width:"100%",spacing:o,children:[e(Be,{tabs:S.map((s,l)=>({label:s.label,renderRight:s.getTotalBadgeProps?v=>s.getTotalBadgeProps?e(He,{...s.getTotalBadgeProps({...v,total:l===Ge?M.length+$.length+Q.length+F.length:l===Je?de.length:0,isActive:x===l})}):void 0:void 0})),renderRight:!a&&(ne||re)?()=>e(qe,{}):!a&&h.keys(h.pick(N,["facebook_id","twitter_id","instagram_id","imdb_id"])).length>0?()=>e(We,{socials:{...N,homepage_id:t==null?void 0:t.homepage}}):void 0}),w(Qe,{children:[e(I,{fallback:e(Xe,{}),children:e(lt,{})}),e(I,{fallback:e(Ye,{}),children:e(pt,{movieDepartments:L,tvShowDepartments:E,total:M.length+$.length+Q.length+F.length})}),e(I,{fallback:e(Ze,{}),children:e(mt,{})})]})]})})})]})})};export{ut as PersonContext,Ct as default};
