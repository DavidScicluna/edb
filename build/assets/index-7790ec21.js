import{dH as M,a7 as I,a8 as L,aL as H,ao as S,dE as Y,E as e,a6 as b,dI as Z,dJ as ee,ae as te,eH as pe,N as E,bC as ue,eI as ve,bD as he,eJ as ge,bE as we,eK as be,x as F,ap as z,dL as ye,cx as O,bI as ie,bO as se,ah as Q,aD as Te,bG as fe,aE as Ce,bP as B,J as oe,eE as Se,dM as G,a9 as re,ar as $e,eo as Ve,bS as W,bT as A,bU as xe,ai as Ee,bV as K,bW as U,bX as J,bY as N,c0 as Fe,at as He,aQ as ae,b6 as Le,bz as Pe,af as ke,V as De}from"./useUserTheme-cad0e91d.js";import{u as T}from"./useMovieContext-b3bd3057.js";import{V as Qe,a as j,b as Me,c as Ie,d as ze,e as k,f as Re}from"./index-c7b185ee.js";import{V as Oe,a as Be,b as D,c as _e,d as Ge,e as We}from"./index-98cf844d.js";import{i as Ae,o as Ke,v as Ue,p as Je,r as Ne,h as je,g as qe}from"./tabs-8cea7072.js";import{V as Xe}from"./index-6409f3e0.js";import{V as Ye}from"./index-6a4e7d59.js";import{V as Ze}from"./index-b0754bf1.js";import{d as q}from"./dimensions-1922ff5f.js";import{H as et,a as tt,b as X,c as it}from"./index-3c387dce.js";import{T as st}from"./index-6fc29f67.js";import{V as ot,a as rt,b as at}from"./index-88486953.js";import"./index-f7f2345e.js";import"./index-da6fdb45.js";import"./index-f91c493c.js";import"./index-65752566.js";import"./index-cc453732.js";import"./index-21c2c4e5.js";import"./index-5e29d59e.js";import"./index-43080e55.js";import"./formats-993363c7.js";import"./user-1d41ba74.js";import"./index-490c57f0.js";import"./index-d96d68db.js";import"./index-566ac3e3.js";import"./index-6c03e0d3.js";import"./index-67fb8a4b.js";import"./index-278c1566.js";import"./index-9f080699.js";import"./index-c20f4d73.js";import"./index-f93cc2e8.js";const{getHue:nt}=te,dt=M({type:"backdrop",mode:"thumbnail"}),ct=M({type:"backdrop",mode:"full"}),lt=({movie:i})=>{const d=I(),{colorMode:c}=L(),{videosQuery:r}=T(),{data:s}=r||{},{results:m=[]}=s||{},{id:u,title:o,backdrop_path:a,video:h=!1}=i||{},t=H(o?`${o} ${S({type:"single",mediaType:"movie"})} backdrop`:`${S({type:"single",mediaType:"movie"})} backdrop`),p=H(Y());return e(Oe,{alt:t,hasVideo:h||m.length>0,type:m.find(({type:l})=>b.lowerCase(l)==="trailer")?"Trailer":m.find(({type:l})=>b.lowerCase(l)==="teaser")?"Teaser":m.find(({type:l})=>b.lowerCase(l)==="featurette")?"Featurette":void 0,src:{boring:Z({id:u?String(u):p,colors:b.omit({...d.colors},["transparent","black","white"]),hue:nt({colorMode:c,type:"color"}),size:500,variant:ee({mediaType:"movie"})}),thumbnail:`https://image.tmdb.org/t/p/${dt}${a}`,full:`https://image.tmdb.org/t/p/${ct}${a}`}})},{getHue:mt}=te,pt=M({type:"poster",mode:"thumbnail"}),ut=M({type:"poster",mode:"full"}),vt=({movie:i})=>{const d=I(),{colorMode:c}=L(),{id:r,title:s,poster_path:m}=i||{},u=H(s?`${s} ${S({type:"single",mediaType:"movie"})} poster`:`${S({type:"single",mediaType:"movie"})} poster`),o=H(Y());return e(Be,{alt:u,src:{boring:Z({id:r?String(r):o,colors:b.omit({...d.colors},["transparent","black","white"]),hue:mt({colorMode:c,type:"color"}),size:500,variant:ee({mediaType:"movie"})}),thumbnail:`https://image.tmdb.org/t/p/${pt}${m}`,full:`https://image.tmdb.org/t/p/${ut}${m}`}})},ht=()=>{const{movieQuery:i,creditsQuery:d}=T(),{data:c,isFetching:r,isLoading:s}=i||{},{id:m,tagline:u,overview:o,genres:a=[]}=c||{},{data:h,isFetching:t,isLoading:p}=d||{},{crew:l=[]}=h||{},{data:g,isFetching:$,isLoading:f}=pe({props:{mediaType:"movie",id:Number(m)},options:{enabled:!!m}}),{keywords:n=[]}=g||{},v=l.filter(({job:y})=>y==="Director"),V=l.filter(({job:y})=>y==="Executive Producer"),C=l.filter(({job:y})=>y==="Producer"),w=l.filter(({job:y})=>y==="Writer");return e(Qe,{children:E(j,{children:[e(Me,{renderPoster:()=>r||s?e(Ie,{}):e(vt,{movie:c}),renderBackdrop:()=>r||s?e(ze,{}):e(lt,{movie:c})}),E(j,{px:2,pb:2,children:[r||s?e(ue,{}):u?e(ve,{tagline:u}):null,r||s?e(he,{}):o?e(ge,{plot:o}):null,r||s?e(we,{}):a.length>0?e(be,{mediaType:"movie",genres:a}):null,t||p?e(k,{label:"Directors"}):v.length>0?e(D,{label:v.length===1?"Director":"Directors",crew:v}):null,t||p?e(k,{label:"Executive Producers"}):V.length>0?e(D,{label:V.length===1?"Executive Producer":"Executive Producers",crew:V}):null,t||p?e(k,{label:"Producers"}):C.length>0?e(D,{label:C.length===1?"Producer":"Producers",crew:C}):null,t||p?e(k,{label:"Writers"}):w.length>0?e(D,{label:w.length===1?"Writer":"Writers",crew:w}):null,$||f?e(Re,{}):n.length>0?e(_e,{mediaType:"movie",keywords:n}):null]})]})})},gt=({id:i})=>{const{colorMode:d}=L(),{movieQuery:c}=T(),{data:r}=c||{},{id:s}=r||{},[m,u]=F.useState(),o=z(m),{data:a,isFetching:h,isLoading:t,isError:p}=ye({props:{mediaType:"collection",id:Number(i)},options:{enabled:!!i,onSuccess:({parts:l=[]})=>{u(O([...l]).asc(({release_date:g})=>g).findIndex(({id:g})=>g===s))}}});return!p&&(h||t)?e(Ae,{}):!p&&a?E(ie,{colorMode:d,isFullWidth:!0,p:2,children:[e(se,{renderTitle:l=>e(Q,{...l,children:`Part of the ${a!=null&&a.name?a==null?void 0:a.name:S({type:"single",mediaType:"collection"})}`}),actions:o&&o>=0?E(Te,{colorMode:d,size:"xs",variant:"outlined",children:[e(fe,{icon:"tag",category:"outlined"}),e(Ce,{children:`${B(o+1).format({output:"ordinal"})} ${S({type:"single",mediaType:"movie"})} in the ${S({type:"single",mediaType:"collection"})}`})]}):void 0}),e(oe,{children:e(Se,{collection:a})})]}):null},_=i=>{const{movieQuery:d}=T(),{data:c}=d||{},{id:r}=c||{},{person:s,type:m,isCreditsFetching:u=!1,isCreditsLoading:o=!1,isCreditsError:a=!1,isCreditsSuccess:h=!1}=i,{id:t,name:p,gender:l}=s,{data:g,isFetching:$,isLoading:f,isError:n,isSuccess:v}=G({props:{mediaType:"movie",id:t},options:{enabled:!!t}}),{cast:V=[],crew:C=[]}=g||{},{data:w,isFetching:y,isLoading:ne,isError:de,isSuccess:ce}=G({props:{mediaType:"tv",id:t},options:{enabled:!!t}}),{cast:le=[],crew:me=[]}=w||{},P=b.capitalize(m==="actor"?l===1?"Actress":"Actor":m);return e(Xe,{credits:{cast:[...V.filter(x=>x.id!==r).map(x=>({...x,media_type:"movie"})),...le.map(x=>({...x,media_type:"tv"}))],crew:[...C.filter(x=>x.id!==r).map(x=>({...x,media_type:"movie"})),...me.map(x=>({...x,media_type:"tv"}))]},title:p?`More from ${p} the ${P}`:`More from the ${P}`,subtitle:`This list is showcasing some of the ${S({type:"multiple",mediaType:"movie"})} & ${S({type:"multiple",mediaType:"tv"})} that ${p||`the ${P}`} is most known for`,emptyLabel:p?`${p} known for credits`:`${P} known for credits`,isFetching:u||$||y,isLoading:o||f||ne,isError:a&&(n||de),isSuccess:h&&(v||ce)})},wt=()=>{const{creditsQuery:i}=T(),{data:d,isFetching:c,isLoading:r,isError:s,isSuccess:m}=i||{},{crew:u=[]}=d||{},o=u.find(({job:a})=>a==="Director");return o?e(_,{person:o,type:"director",isCreditsFetching:c,isCreditsLoading:r,isCreditsError:s,isCreditsSuccess:m}):null},bt=()=>{const{creditsQuery:i}=T(),{data:d,isFetching:c,isLoading:r,isError:s,isSuccess:m}=i||{},{cast:u=[]}=d||{},o=u&&u[0]?u[0]:void 0;return o?e(_,{person:o,type:"actor",isCreditsFetching:c,isCreditsLoading:r,isCreditsError:s,isCreditsSuccess:m}):null},yt=()=>{const{creditsQuery:i}=T(),{data:d,isFetching:c,isLoading:r,isError:s,isSuccess:m}=i||{},{crew:u=[]}=d||{},o=u.find(({job:h})=>h==="Director"),a=u.find(({job:h})=>h==="Writer");return a&&(o==null?void 0:o.id)!==a.id?e(_,{person:a,type:"writer",isCreditsFetching:c,isCreditsLoading:r,isCreditsError:s,isCreditsSuccess:m}):null},Tt=()=>{const{movieQuery:i}=T(),{data:d}=i||{};return e(Ge,{mediaType:"movie",mediaItem:d})},ft=()=>{const{movieQuery:i}=T(),{data:d}=i||{};return e(We,{mediaType:"movie",mediaItem:d})},R=b.memoize(i=>{switch(i){case"cast":return qe;case"crew":return je;case"reviews":return Ne;case"photos":return Je;case"videos":return Ue;case"overview":default:return Ke}}),Ct=()=>{const{movieQuery:i,imagesQuery:d,onSetActiveTab:c}=T(),{data:r}=i||{},{title:s}=r||{},{data:m,isFetching:u,isLoading:o,isError:a,isSuccess:h}=d||{},{posters:t=[],backdrops:p=[]}=m||{},[l,g]=F.useState([]),$=z(l,"slow"),f=H(b.range(10).map(()=>({orientation:b.sample(["portrait","landscape"])})));return F.useEffect(()=>{$.length===0&&t.length+p.length>0&&g(b.shuffle([...t.filter((n,v)=>v<10).map(n=>({image:n,orientation:"portrait"})),...p.filter((n,v)=>v<10).map(n=>({image:n,orientation:"landscape"}))]))},[t,p]),e(Ye,{mediaType:"movie",photos:[...$],dummyPhotos:[...f],title:"Photos",subtitle:`This list is showcasing some of the posters & backdrops that were used for ${s||`the ${S({type:"single",mediaType:"movie"})}`}`,emptyLabel:s?`${s} photos`:"Photos",total:t.length+p.length,isLoading:u||o,isError:a,isSuccess:h,onFooterClick:()=>c({index:R("photos")})})},St=()=>{const{movieQuery:i,videosQuery:d,onSetActiveTab:c}=T(),{data:r}=i||{},{title:s}=r||{},{data:m,isFetching:u,isLoading:o,isError:a,isSuccess:h}=d||{},{results:t=[]}=m||{},[p,l]=F.useState([]),g=z(p,"slow");return F.useEffect(()=>{l(b.shuffle([...t.filter(($,f)=>f<10)]))},[t]),e(Ze,{mediaType:"movie",videos:[...g],title:"Videos",subtitle:`This list is showcasing some of the trailers, teasers & featurettes that were created for ${s||`the ${S({type:"single",mediaType:"movie"})}`}`,emptyLabel:s?`${s} videos`:"Videos",total:t.length,isLoading:u||o,isError:a,isSuccess:h,onFooterClick:()=>c({index:R("videos")})})},$t=()=>{const i=I(),{color:d,colorMode:c}=L(),[r]=re(`(max-width: ${i.breakpoints.sm})`),{movieQuery:s,creditsQuery:m,onSetActiveTab:u}=T(),{data:o,isFetching:a,isLoading:h}=s||{},{title:t}=o||{},{data:p,isFetching:l,isLoading:g,isError:$,isSuccess:f}=m||{},{cast:n=[]}=p||{},[v,V]=F.useState(b.uniqBy([...n],"id").filter((w,y)=>y<20)),C=z(v,"slow");return $e(()=>{V(b.uniqBy([...n],"id").filter((w,y)=>y<20))},[n]),E(Ve,{colorMode:c,isDisabled:C.length===0||a||h||l||g,isFullWidth:!0,spacing:2,p:2,children:[e(et,{renderTitle:w=>e(Q,{...w,children:"Top Cast"}),renderSubtitle:w=>e(Q,{...w,children:`This list is showcasing the top cast of ${t||`the ${S({type:"single",mediaType:"movie"})}`}`}),arrowProps:{variant:"icon"},spacing:0}),e(tt,{children:!(a||h||l||g)&&$?e(W,{color:d,colorMode:c,children:E(A,{children:[e(xe,{renderIcon:w=>e(Ee,{...w,width:i.fontSizes["6xl"],height:i.fontSizes["6xl"],fontSize:i.fontSizes["6xl"],icon:"error_outline"}),p:2}),E(K,{children:[e(U,{}),e(J,{children:N({type:"error",label:t?`${t} Top Cast`:"Top Cast"})})]})]})}):!(a||h||l||g)&&f&&C&&C.length===0?e(W,{color:d,colorMode:c,children:e(A,{children:E(K,{children:[e(U,{}),e(J,{children:N({type:"empty",label:t?`${t} Top Cast`:"Top Cast"})})]})})}):!(a||h||l||g)&&f&&C&&C.length>0?e(X,{children:C.map(w=>e(Fe,{person:w,subtitle:w.character?`As ${w.character}`:void 0,sx:q},w.id))}):e(X,{children:b.range(20).map((w,y)=>e(He,{mediaType:"person",hasSubtitle:!0,sx:q},y))})}),e(it,{children:e(ae,{color:d,colorMode:c,isDisabled:n.length===0,isFullWidth:!0,onClick:()=>u({index:R("cast")}),size:r?"xs":"sm",variant:"text",children:`View all ${B(n.length).format({average:!0})} Cast`})})]})},Vt=()=>{const i=I(),{color:d,colorMode:c}=L(),[r]=re(`(max-width: ${i.breakpoints.sm})`),{movieQuery:s,reviewsQuery:m,onSetActiveTab:u}=T(),{data:o}=s||{},{id:a,title:h}=o||{},{pages:t=[]}=(m==null?void 0:m.data)||{},{results:p=[]}=t&&t[0]?t[0]:{},l=Le(n=>{var v;return((v=n.users.data.activeUser.data.reviews.user.movie.find(({mediaItem:V})=>(V==null?void 0:V.id)===a))==null?void 0:v.reviews)||[]}),[g,$]=F.useState(0),f=F.useCallback(b.debounce(()=>{$(l.length+t.reduce((n,{results:v=[]})=>n+v.length,0))},500),[l,t]);return F.useEffect(()=>f(),[l,t]),o?E(ie,{colorMode:c,isFullWidth:!0,p:2,children:[e(se,{renderTitle:n=>e(Q,{...n,children:"Latest Review"}),actions:g>0?e(st,{colorMode:c,total:g,prefix:"Total of",suffix:`Review${g===1?"":"s"}`,size:"xs",variant:"outlined"}):void 0}),e(oe,{children:l&&l.length>0?O(l).desc(({updatedAt:n,createdAt:v})=>n||v).filter((n,v)=>v===0).map((n,v)=>e(ot,{mediaType:"movie",mediaItem:o,review:n},v)):p&&p.length>0?O(p).desc(({updated_at:n,created_at:v})=>n||v).filter((n,v)=>v===0).map(n=>e(rt,{review:n},n.id)):e(at,{mediaType:"movie",mediaItem:o,name:h})}),e(Pe,{children:e(ae,{color:d,colorMode:c,isFullWidth:!0,onClick:()=>u({index:R("reviews")}),size:r?"xs":"sm",variant:"text",children:g>0?`View all ${B(g).format({average:!0})} Reviews`:"Go to Reviews Tab"})})]}):null},si=()=>{const{spacing:i}=ke(),{movieQuery:d}=T(),{data:c}=d||{},{belongs_to_collection:r}=c||{};return e(De,{width:"100%",spacing:i,children:b.compact([e(ht,{},"ds-edb-movie-overview-tab-hero"),e($t,{},"ds-edb-movie-overview-tab-top-cast"),e(Ct,{},"ds-edb-movie-overview-tab-photos"),e(St,{},"ds-edb-movie-overview-tab-videos"),e(Vt,{},"ds-edb-movie-overview-tab-review"),r&&r.id?e(gt,{id:r.id},"ds-edb-movie-overview-tab-collection"):null,e(wt,{},"ds-edb-movie-overview-tab-director"),e(yt,{},"ds-edb-movie-overview-tab-writer"),e(bt,{},"ds-edb-movie-overview-tab-top-actor"),e(ft,{},"ds-edb-movie-overview-tab-similar"),e(Tt,{},"ds-edb-movie-overview-tab-recommendations")])})};export{si as default};
